{% assign section_id = section.id | replace: '_', '' | replace: '-', '' | slice: 0, 8 %}

{% style %}

  /* ── Sección ── */
  .rc-section-{{ section_id }} {
    display: block;
    width: 100%;
    background-color: {{ section.settings.bg_color }};
    padding: {{ section.settings.padding_top }}px {{ section.settings.padding_x }}px {{ section.settings.padding_bottom }}px;
  }

  .rc-container-{{ section_id }} {
    max-width: {{ section.settings.max_width }}px;
    margin: 0 auto;
  }

  /* ── Header ── */
  .rc-header-{{ section_id }} {
    text-align: {{ section.settings.header_align }};
    margin-bottom: {{ section.settings.header_margin_bottom }}px;
  }

  .rc-title-{{ section_id }} {
    font-size: {{ section.settings.title_size }}px;
    font-weight: {{ section.settings.title_weight }};
    color: {{ section.settings.title_color }};
    margin: 0 0 {{ section.settings.title_margin_bottom }}px 0;
    line-height: 1.2;
    {% if section.settings.title_uppercase %}text-transform: uppercase;{% endif %}
  }

  .rc-subtitle-{{ section_id }} {
    font-size: {{ section.settings.subtitle_size }}px;
    color: {{ section.settings.subtitle_color }};
    margin: 0;
    line-height: 1.5;
  }

  /* ── Carrusel wrapper ── */
  .rc-carousel-outer-{{ section_id }} {
    position: relative;
  }

  .rc-carousel-viewport-{{ section_id }} {
    overflow: hidden;
  }

  .rc-carousel-track-{{ section_id }} {
    display: flex;
    gap: {{ section.settings.card_gap }}px;
    transition: transform {{ section.settings.transition_duration }}ms ease;
    will-change: transform;
  }

  /* ── Tarjeta ── */
  .rc-card-{{ section_id }} {
    flex: 0 0 calc((100% - ({{ section.settings.visible_cards | minus: 1 }} * {{ section.settings.card_gap }}px)) / {{ section.settings.visible_cards }});
    background-color: {{ section.settings.card_bg }};
    border: {{ section.settings.card_border_width }}px solid {{ section.settings.card_border_color }};
    border-radius: {{ section.settings.card_radius }}px;
    overflow: hidden;
    display: flex;
    flex-direction: column;
  }

  /* Imagen de la tarjeta */
  .rc-card-media-{{ section_id }} {
    position: relative;
    width: 100%;
    padding-top: {{ section.settings.image_ratio }}%;
    overflow: hidden;
    background-color: {{ section.settings.image_bg }};
    flex-shrink: 0;
  }

  .rc-card-media-{{ section_id }} img {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    object-position: {{ section.settings.image_position }};
    display: block;
  }

  .rc-card-media-placeholder-{{ section_id }} {
    position: absolute;
    inset: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    background: linear-gradient(135deg, #f0f0f0, #e0e0e0);
  }
  .rc-card-media-placeholder-{{ section_id }} svg {
    width: 60px; height: 60px; opacity: 0.3;
  }

  /* Cuerpo de la tarjeta */
  .rc-card-body-{{ section_id }} {
    padding: {{ section.settings.card_padding }}px;
    display: flex;
    flex-direction: column;
    flex: 1;
  }

  .rc-card-text-{{ section_id }} {
    font-size: {{ section.settings.review_text_size }}px;
    color: {{ section.settings.review_text_color }};
    line-height: {{ section.settings.review_text_lh }};
    margin: 0 0 {{ section.settings.text_margin_bottom }}px 0;
    flex: 1;
  }

  .rc-card-author-{{ section_id }} {
    font-size: {{ section.settings.author_size }}px;
    font-weight: {{ section.settings.author_weight }};
    color: {{ section.settings.author_color }};
    margin: 0;
    {% if section.settings.author_uppercase %}text-transform: uppercase;{% endif %}
  }

  /* ── Flechas ── */
  .rc-arrow-{{ section_id }} {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    z-index: 10;
    width: {{ section.settings.arrow_size }}px;
    height: {{ section.settings.arrow_size }}px;
    border-radius: {{ section.settings.arrow_radius }}px;
    background-color: {{ section.settings.arrow_bg }};
    border: {{ section.settings.arrow_border_width }}px solid {{ section.settings.arrow_border_color }};
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    padding: 0;
    transition: background-color 0.2s ease, transform 0.2s ease;
    opacity: {{ section.settings.arrow_opacity | divided_by: 100.0 }};
  }
  .rc-arrow-{{ section_id }}:hover {
    background-color: {{ section.settings.arrow_bg_hover }};
    opacity: 1;
    transform: translateY(-50%) scale(1.06);
  }
  .rc-arrow-{{ section_id }} svg {
    width: {{ section.settings.arrow_icon_size }}px;
    height: {{ section.settings.arrow_icon_size }}px;
    fill: none;
    stroke: {{ section.settings.arrow_icon_color }};
    stroke-width: 2;
    stroke-linecap: round;
    stroke-linejoin: round;
  }
  .rc-arrow-prev-{{ section_id }} { left: -{{ section.settings.arrow_offset }}px; }
  .rc-arrow-next-{{ section_id }} { right: -{{ section.settings.arrow_offset }}px; }

  /* Ocultar flechas si no hacen falta */
  .rc-arrow-hidden-{{ section_id }} { display: none !important; }

  /* ── Dots ── */
  .rc-dots-{{ section_id }} {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: {{ section.settings.dots_gap }}px;
    margin-top: {{ section.settings.dots_margin_top }}px;
  }

  .rc-dot-{{ section_id }} {
    width: {{ section.settings.dot_size }}px;
    height: {{ section.settings.dot_size }}px;
    border-radius: 50%;
    background-color: {{ section.settings.dot_color }};
    opacity: {{ section.settings.dot_opacity | divided_by: 100.0 }};
    border: none;
    padding: 0;
    cursor: pointer;
    transition: all 0.3s ease;
  }
  .rc-dot-{{ section_id }}.active {
    background-color: {{ section.settings.dot_active_color }};
    opacity: 1;
    transform: scale(1.3);
  }

  /* ── Responsive ── */
  @media screen and (max-width: 990px) {
    .rc-section-{{ section_id }} {
      padding: {{ section.settings.padding_top_mobile }}px {{ section.settings.padding_x_mobile }}px {{ section.settings.padding_bottom_mobile }}px;
    }
    .rc-card-{{ section_id }} {
      flex: 0 0 calc((100% - ({{ section.settings.visible_cards_tablet | minus: 1 }} * {{ section.settings.card_gap }}px)) / {{ section.settings.visible_cards_tablet }});
    }
    .rc-arrow-prev-{{ section_id }} { left: 0; }
    .rc-arrow-next-{{ section_id }} { right: 0; }
    .rc-title-{{ section_id }} { font-size: {{ section.settings.title_size | times: 0.78 | round }}px; }
  }

  @media screen and (max-width: 640px) {
    .rc-card-{{ section_id }} {
      flex: 0 0 {{ section.settings.card_width_mobile }}%;
    }
    .rc-arrow-{{ section_id }} {
      width: {{ section.settings.arrow_size | times: 0.8 | round }}px;
      height: {{ section.settings.arrow_size | times: 0.8 | round }}px;
    }
    {% if section.settings.hide_arrows_mobile %}
    .rc-arrow-{{ section_id }} { display: none !important; }
    {% endif %}
  }

  @media (prefers-reduced-motion: reduce) {
    .rc-carousel-track-{{ section_id }},
    .rc-dot-{{ section_id }},
    .rc-arrow-{{ section_id }} { transition: none; }
  }

{% endstyle %}

{%- liquid
  assign total_slides = 0
  for block in section.blocks
    if block.type == 'review'
      assign total_slides = total_slides | plus: 1
    endif
  endfor

  assign visible      = section.settings.visible_cards | plus: 0
  assign need_arrows  = false
  if total_slides > visible
    assign need_arrows = true
  endif
-%}

<section class="rc-section-{{ section_id }}">
  <div class="rc-container-{{ section_id }}">

    <!-- Header -->
    {% if section.settings.title != blank or section.settings.subtitle != blank %}
      <div class="rc-header-{{ section_id }}">
        {% if section.settings.title != blank %}
          <h2 class="rc-title-{{ section_id }}">{{ section.settings.title }}</h2>
        {% endif %}
        {% if section.settings.subtitle != blank %}
          <p class="rc-subtitle-{{ section_id }}">{{ section.settings.subtitle }}</p>
        {% endif %}
      </div>
    {% endif %}

    <!-- Carrusel -->
    <div class="rc-carousel-outer-{{ section_id }}">

      <!-- Flecha anterior -->
      <button
        class="rc-arrow-{{ section_id }} rc-arrow-prev-{{ section_id }}{% unless need_arrows %} rc-arrow-hidden-{{ section_id }}{% endunless %}"
        data-rc-prev
        type="button"
        aria-label="Reviews anteriores"
      >
        <svg viewBox="0 0 24 24" aria-hidden="true"><polyline points="15 18 9 12 15 6"></polyline></svg>
      </button>

      <!-- Viewport -->
      <div class="rc-carousel-viewport-{{ section_id }}">
        <div class="rc-carousel-track-{{ section_id }}" data-rc-track>

          {% for block in section.blocks %}
            {% if block.type == 'review' %}
              <div class="rc-card-{{ section_id }}" {{ block.shopify_attributes }}>

                <!-- Imagen -->
                <div class="rc-card-media-{{ section_id }}">
                  {% if block.settings.image != blank %}
                    <img
                      src="{{ block.settings.image | image_url: width: 800 }}"
                      srcset="
                        {{ block.settings.image | image_url: width: 400 }} 400w,
                        {{ block.settings.image | image_url: width: 600 }} 600w,
                        {{ block.settings.image | image_url: width: 800 }} 800w"
                      sizes="(max-width: 640px) 90vw, (max-width: 990px) 50vw, 33vw"
                      alt="{{ block.settings.image.alt | default: block.settings.author | escape }}"
                      loading="lazy"
                      width="{{ block.settings.image.width }}"
                      height="{{ block.settings.image.height }}"
                    >
                  {% else %}
                    <div class="rc-card-media-placeholder-{{ section_id }}">
                      {{ 'image' | placeholder_svg_tag }}
                    </div>
                  {% endif %}
                </div>

                <!-- Cuerpo -->
                <div class="rc-card-body-{{ section_id }}">
                  {% if block.settings.review_text != blank %}
                    <p class="rc-card-text-{{ section_id }}">{{ block.settings.review_text }}</p>
                  {% endif %}
                  {% if block.settings.author != blank %}
                    <p class="rc-card-author-{{ section_id }}">{{ block.settings.author }}</p>
                  {% endif %}
                </div>

              </div>
            {% endif %}
          {% endfor %}

          {% if section.blocks.size == 0 %}
            {% for i in (1..3) %}
              <div class="rc-card-{{ section_id }}">
                <div class="rc-card-media-{{ section_id }}">
                  <div class="rc-card-media-placeholder-{{ section_id }}">{{ 'image' | placeholder_svg_tag }}</div>
                </div>
                <div class="rc-card-body-{{ section_id }}">
                  <p class="rc-card-text-{{ section_id }}">"Texto de ejemplo para la reseña de un cliente satisfecho."</p>
                  <p class="rc-card-author-{{ section_id }}">nombre del cliente</p>
                </div>
              </div>
            {% endfor %}
          {% endif %}

        </div>
      </div>

      <!-- Flecha siguiente -->
      <button
        class="rc-arrow-{{ section_id }} rc-arrow-next-{{ section_id }}{% unless need_arrows %} rc-arrow-hidden-{{ section_id }}{% endunless %}"
        data-rc-next
        type="button"
        aria-label="Reviews siguientes"
      >
        <svg viewBox="0 0 24 24" aria-hidden="true"><polyline points="9 18 15 12 9 6"></polyline></svg>
      </button>

    </div><!-- /carousel-outer -->

    <!-- Dots -->
    {% if need_arrows and section.settings.show_dots %}
      {%- liquid
        assign dots_count = total_slides | minus: visible | plus: 1
        if dots_count < 1
          assign dots_count = 1
        endif
      -%}
      <div class="rc-dots-{{ section_id }}" data-rc-dots>
        {% for i in (1..dots_count) %}
          <button
            class="rc-dot-{{ section_id }}{% if forloop.first %} active{% endif %}"
            data-dot="{{ forloop.index0 }}"
            type="button"
            aria-label="Ir a la posición {{ forloop.index }}"
          ></button>
        {% endfor %}
      </div>
    {% endif %}

  </div>
</section>

<script>
(function () {
  const section    = document.querySelector('.rc-section-{{ section_id }}');
  if (!section) return;

  const track      = section.querySelector('[data-rc-track]');
  const prevBtn    = section.querySelector('[data-rc-prev]');
  const nextBtn    = section.querySelector('[data-rc-next]');
  const dots       = Array.from(section.querySelectorAll('[data-dot]'));
  const cards      = Array.from(track.querySelectorAll('.rc-card-{{ section_id }}'));

  if (cards.length === 0) return;

  /* Número de tarjetas visibles según breakpoint */
  function getVisible() {
    if (window.innerWidth <= 640)  return {{ section.settings.visible_cards_mobile }};
    if (window.innerWidth <= 990)  return {{ section.settings.visible_cards_tablet }};
    return {{ section.settings.visible_cards }};
  }

  const gap          = {{ section.settings.card_gap }};
  const totalCards   = cards.length;
  let   current      = 0; // posición actual (índice de la primera tarjeta visible)

  function maxIndex() { return Math.max(0, totalCards - getVisible()); }

  function getCardWidth() {
    /* Calculamos el ancho real de una tarjeta (incluye el gap) */
    return cards[0].getBoundingClientRect().width + gap;
  }

  function goTo(index) {
    const max = maxIndex();
    if (index < 0) index = 0;
    if (index > max) index = max;
    current = index;

    track.style.transform = `translateX(-${current * getCardWidth()}px)`;

    /* Dots */
    dots.forEach(d => d.classList.remove('active'));
    if (dots[current]) dots[current].classList.add('active');

    /* Ocultar/mostrar flechas en límites */
    if (prevBtn) prevBtn.style.opacity = current === 0   ? '0.3' : '';
    if (nextBtn) nextBtn.style.opacity = current === max ? '0.3' : '';
  }

  /* Listeners */
  if (prevBtn) prevBtn.addEventListener('click', () => goTo(current - 1));
  if (nextBtn) nextBtn.addEventListener('click', () => goTo(current + 1));

  dots.forEach(d => {
    d.addEventListener('click', () => goTo(parseInt(d.dataset.dot, 10)));
  });

  /* Swipe táctil */
  let tx = 0;
  track.addEventListener('touchstart', e => { tx = e.changedTouches[0].screenX; }, { passive: true });
  track.addEventListener('touchend',   e => {
    const diff = tx - e.changedTouches[0].screenX;
    if (Math.abs(diff) > 50) goTo(diff > 0 ? current + 1 : current - 1);
  }, { passive: true });

  /* Teclado */
  section.addEventListener('keydown', e => {
    if (e.key === 'ArrowLeft')  goTo(current - 1);
    if (e.key === 'ArrowRight') goTo(current + 1);
  });

  /* Recalcular al resize */
  let resizeTimer;
  window.addEventListener('resize', () => {
    clearTimeout(resizeTimer);
    resizeTimer = setTimeout(() => goTo(Math.min(current, maxIndex())), 150);
  });

  /* Inicializar */
  goTo(0);
})();
</script>

{% schema %}
{
  "name": "Carrusel de reviews",
  "tag": "section",
  "class": "section-reviews-carousel",
  "settings": [
    {
      "type": "header",
      "content": "── Contenedor ──"
    },
    {
      "type": "range",
      "id": "max_width",
      "label": "Ancho máximo",
      "min": 800,
      "max": 1920,
      "step": 40,
      "unit": "px",
      "default": 1280
    },
    {
      "type": "color",
      "id": "bg_color",
      "label": "Color de fondo",
      "default": "#efebe5"
    },
    {
      "type": "range",
      "id": "padding_top",
      "label": "Padding superior",
      "min": 0,
      "max": 120,
      "step": 10,
      "unit": "px",
      "default": 60
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "label": "Padding inferior",
      "min": 0,
      "max": 120,
      "step": 10,
      "unit": "px",
      "default": 60
    },
    {
      "type": "range",
      "id": "padding_x",
      "label": "Padding horizontal",
      "min": 0,
      "max": 80,
      "step": 10,
      "unit": "px",
      "default": 60
    },
    {
      "type": "header",
      "content": "── Header ──"
    },
    {
      "type": "text",
      "id": "title",
      "label": "Título",
      "default": "Lo que dicen nuestros clientes"
    },
    {
      "type": "text",
      "id": "subtitle",
      "label": "Subtítulo",
      "placeholder": "Experiencias reales de personas reales"
    },
    {
      "type": "select",
      "id": "header_align",
      "label": "Alineación header",
      "options": [
        { "value": "left",   "label": "Izquierda" },
        { "value": "center", "label": "Centro"    },
        { "value": "right",  "label": "Derecha"   }
      ],
      "default": "center"
    },
    {
      "type": "range",
      "id": "header_margin_bottom",
      "label": "Espacio bajo el header",
      "min": 16,
      "max": 80,
      "step": 8,
      "unit": "px",
      "default": 40
    },
    {
      "type": "range",
      "id": "title_size",
      "label": "Tamaño título",
      "min": 20,
      "max": 60,
      "step": 2,
      "unit": "px",
      "default": 36
    },
    {
      "type": "select",
      "id": "title_weight",
      "label": "Peso título",
      "options": [
        { "value": "400", "label": "Normal"    },
        { "value": "600", "label": "Semi-bold" },
        { "value": "700", "label": "Bold"      }
      ],
      "default": "700"
    },
    {
      "type": "color",
      "id": "title_color",
      "label": "Color título",
      "default": "#3e2563"
    },
    {
      "type": "checkbox",
      "id": "title_uppercase",
      "label": "Título en mayúsculas",
      "default": false
    },
    {
      "type": "range",
      "id": "title_margin_bottom",
      "label": "Margen inferior título",
      "min": 4,
      "max": 32,
      "step": 4,
      "unit": "px",
      "default": 12
    },
    {
      "type": "range",
      "id": "subtitle_size",
      "label": "Tamaño subtítulo",
      "min": 12,
      "max": 24,
      "step": 1,
      "unit": "px",
      "default": 16
    },
    {
      "type": "color",
      "id": "subtitle_color",
      "label": "Color subtítulo",
      "default": "#3e2563"
    },
    {
      "type": "header",
      "content": "── Carrusel ──"
    },
    {
      "type": "range",
      "id": "visible_cards",
      "label": "Tarjetas visibles (desktop)",
      "min": 1,
      "max": 5,
      "step": 1,
      "default": 3
    },
    {
      "type": "range",
      "id": "visible_cards_tablet",
      "label": "Tarjetas visibles (tablet)",
      "min": 1,
      "max": 3,
      "step": 1,
      "default": 2
    },
    {
      "type": "range",
      "id": "visible_cards_mobile",
      "label": "Tarjetas visibles (móvil)",
      "min": 1,
      "max": 3,
      "step": 1,
      "default": 2
    },
    {
      "type": "range",
      "id": "card_width_mobile",
      "label": "Ancho tarjeta móvil (%)",
      "min": 70,
      "max": 100,
      "step": 5,
      "unit": "%",
      "default": 85
    },
    {
      "type": "range",
      "id": "card_gap",
      "label": "Espacio entre tarjetas",
      "min": 8,
      "max": 40,
      "step": 4,
      "unit": "px",
      "default": 20
    },
    {
      "type": "range",
      "id": "transition_duration",
      "label": "Duración transición",
      "min": 200,
      "max": 800,
      "step": 50,
      "unit": "ms",
      "default": 350
    },
    {
      "type": "header",
      "content": "── Tarjeta ──"
    },
    {
      "type": "color",
      "id": "card_bg",
      "label": "Fondo",
      "default": "#ffffff"
    },
    {
      "type": "range",
      "id": "card_border_width",
      "label": "Grosor borde",
      "min": 0,
      "max": 4,
      "step": 1,
      "unit": "px",
      "default": 0
    },
    {
      "type": "color",
      "id": "card_border_color",
      "label": "Color borde",
      "default": "#e0e0e0"
    },
    {
      "type": "range",
      "id": "card_radius",
      "label": "Radio de borde",
      "min": 0,
      "max": 32,
      "step": 4,
      "unit": "px",
      "default": 12
    },
    {
      "type": "range",
      "id": "card_padding",
      "label": "Padding cuerpo",
      "min": 12,
      "max": 40,
      "step": 4,
      "unit": "px",
      "default": 20
    },
    {
      "type": "header",
      "content": "── Imagen ──"
    },
    {
      "type": "color",
      "id": "image_bg",
      "label": "Fondo imagen",
      "default": "#f0f0f0"
    },
    {
      "type": "range",
      "id": "image_ratio",
      "label": "Ratio imagen (% altura/ancho)",
      "min": 50,
      "max": 150,
      "step": 5,
      "unit": "%",
      "default": 100
    },
    {
      "type": "select",
      "id": "image_position",
      "label": "Foco imagen",
      "options": [
        { "value": "center center", "label": "Centro"    },
        { "value": "top center",    "label": "Arriba"    },
        { "value": "bottom center", "label": "Abajo"     },
        { "value": "center left",   "label": "Izquierda" },
        { "value": "center right",  "label": "Derecha"   }
      ],
      "default": "center center"
    },
    {
      "type": "header",
      "content": "── Texto de la reseña ──"
    },
    {
      "type": "range",
      "id": "review_text_size",
      "label": "Tamaño",
      "min": 12,
      "max": 22,
      "step": 1,
      "unit": "px",
      "default": 14
    },
    {
      "type": "color",
      "id": "review_text_color",
      "label": "Color",
      "default": "#3e2563"
    },
    {
      "type": "range",
      "id": "review_text_lh",
      "label": "Altura de línea",
      "min": 1.2,
      "max": 2.0,
      "step": 0.1,
      "default": 1.6
    },
    {
      "type": "range",
      "id": "text_margin_bottom",
      "label": "Margen inferior texto",
      "min": 8,
      "max": 32,
      "step": 4,
      "unit": "px",
      "default": 16
    },
    {
      "type": "header",
      "content": "── Autor ──"
    },
    {
      "type": "range",
      "id": "author_size",
      "label": "Tamaño",
      "min": 11,
      "max": 20,
      "step": 1,
      "unit": "px",
      "default": 13
    },
    {
      "type": "select",
      "id": "author_weight",
      "label": "Peso",
      "options": [
        { "value": "400", "label": "Normal"    },
        { "value": "600", "label": "Semi-bold" },
        { "value": "700", "label": "Bold"      }
      ],
      "default": "700"
    },
    {
      "type": "color",
      "id": "author_color",
      "label": "Color",
      "default": "#3e2563"
    },
    {
      "type": "checkbox",
      "id": "author_uppercase",
      "label": "Mayúsculas",
      "default": true
    },
    {
      "type": "header",
      "content": "── Flechas ──"
    },
    {
      "type": "range",
      "id": "arrow_size",
      "label": "Tamaño botón",
      "min": 32,
      "max": 64,
      "step": 4,
      "unit": "px",
      "default": 44
    },
    {
      "type": "range",
      "id": "arrow_icon_size",
      "label": "Tamaño ícono",
      "min": 14,
      "max": 32,
      "step": 2,
      "unit": "px",
      "default": 20
    },
    {
      "type": "range",
      "id": "arrow_offset",
      "label": "Salida lateral",
      "min": 0,
      "max": 60,
      "step": 4,
      "unit": "px",
      "default": 24
    },
    {
      "type": "range",
      "id": "arrow_opacity",
      "label": "Opacidad",
      "min": 30,
      "max": 100,
      "step": 10,
      "unit": "%",
      "default": 90
    },
    {
      "type": "range",
      "id": "arrow_radius",
      "label": "Radio de borde",
      "min": 0,
      "max": 60,
      "step": 4,
      "unit": "px",
      "default": 60
    },
    {
      "type": "range",
      "id": "arrow_border_width",
      "label": "Grosor borde",
      "min": 0,
      "max": 3,
      "step": 1,
      "unit": "px",
      "default": 1
    },
    {
      "type": "color",
      "id": "arrow_border_color",
      "label": "Color borde",
      "default": "#3e2563"
    },
    {
      "type": "color",
      "id": "arrow_bg",
      "label": "Fondo",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "arrow_bg_hover",
      "label": "Fondo hover",
      "default": "#f5f0fc"
    },
    {
      "type": "color",
      "id": "arrow_icon_color",
      "label": "Color ícono",
      "default": "#3e2563"
    },
    {
      "type": "checkbox",
      "id": "hide_arrows_mobile",
      "label": "Ocultar flechas en móvil",
      "default": false
    },
    {
      "type": "header",
      "content": "── Dots ──"
    },
    {
      "type": "checkbox",
      "id": "show_dots",
      "label": "Mostrar dots",
      "default": true
    },
    {
      "type": "range",
      "id": "dots_margin_top",
      "label": "Margen superior",
      "min": 12,
      "max": 48,
      "step": 4,
      "unit": "px",
      "default": 24
    },
    {
      "type": "range",
      "id": "dots_gap",
      "label": "Espacio entre dots",
      "min": 4,
      "max": 20,
      "step": 2,
      "unit": "px",
      "default": 8
    },
    {
      "type": "range",
      "id": "dot_size",
      "label": "Tamaño",
      "min": 6,
      "max": 18,
      "step": 2,
      "unit": "px",
      "default": 10
    },
    {
      "type": "color",
      "id": "dot_color",
      "label": "Color",
      "default": "#c4b1ca"
    },
    {
      "type": "range",
      "id": "dot_opacity",
      "label": "Opacidad",
      "min": 20,
      "max": 80,
      "step": 10,
      "unit": "%",
      "default": 50
    },
    {
      "type": "color",
      "id": "dot_active_color",
      "label": "Color activo",
      "default": "#3e2563"
    },
    {
      "type": "header",
      "content": "── Móvil ──"
    },
    {
      "type": "range",
      "id": "padding_top_mobile",
      "label": "Padding superior",
      "min": 0,
      "max": 80,
      "step": 10,
      "unit": "px",
      "default": 40
    },
    {
      "type": "range",
      "id": "padding_bottom_mobile",
      "label": "Padding inferior",
      "min": 0,
      "max": 80,
      "step": 10,
      "unit": "px",
      "default": 40
    },
    {
      "type": "range",
      "id": "padding_x_mobile",
      "label": "Padding horizontal",
      "min": 0,
      "max": 40,
      "step": 5,
      "unit": "px",
      "default": 20
    }
  ],
  "blocks": [
    {
      "type": "review",
      "name": "Reviews",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Imagen"
        },
        {
          "type": "textarea",
          "id": "review_text",
          "label": "Texto de la reseña",
          "default": "\"Texto de la reseña del cliente.\""
        },
        {
          "type": "text",
          "id": "author",
          "label": "Nombre del cliente",
          "default": "nombre del cliente"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Carrusel de reviews",
      "settings": {
        "title": "Lo que dicen nuestros clientes",
        "visible_cards": 3,
        "show_dots": true
      },
      "blocks": [
        { "type": "review", "settings": { "author": "María G.", "review_text": "\"Este producto superó todas mis expectativas. La calidad es increíble y lo recomiendo a todo el mundo.\"" } },
        { "type": "review", "settings": { "author": "Carlos R.", "review_text": "\"Me encanta la atención al detalle. Definitivamente volveré a comprar.\"" } },
        { "type": "review", "settings": { "author": "Ana M.",   "review_text": "\"Producto de alta calidad y entrega rápida. Muy satisfecha con mi compra.\"" } },
        { "type": "review", "settings": { "author": "Laura P.", "review_text": "\"Una experiencia de compra excelente de principio a fin. ¡Totalmente recomendado!\"" } }
      ]
    }
  ]
}
{% endschema %}
