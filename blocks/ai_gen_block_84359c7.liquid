{% doc %}
  Multi-Product Selector - Estilo Chocho
  Selector de productos con diseño premium tipo Chocho
{% enddoc %}
{% assign block_id = block.id | replace: '_', '' | downcase %}

{% style %}
  .chocho-selector-{{ block_id }} {
    width: 100%;
    max-width: 480px;
    margin: 0 auto;
    font-family: var(--font-body-family), -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  }

  /* ===== BADGE MOST POPULAR ===== */
  .chocho-selector__badge-{{ block_id }} {
    display: inline-block;
    background: {{ block.settings.badge_bg | default: '#4A6B1A' }};
    color: {{ block.settings.badge_text | default: '#ffffff' }};
    font-size: 11px;
    font-weight: 800;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    padding: 6px 16px;
    border-radius: 4px;
    margin-bottom: 12px;
  }

  /* ===== OPCIONES DE COMPRA (Subscribe vs One-time) ===== */
  .chocho-selector__purchase-options-{{ block_id }} {
    display: flex;
    flex-direction: column;
    gap: 12px;
    margin-bottom: 24px;
  }

  .chocho-selector__option-{{ block_id }} {
    position: relative;
    border: 2px solid {{ block.settings.border_color | default: '#E8E4DF' }};
    border-radius: 12px;
    padding: 20px 16px;
    cursor: pointer;
    transition: all 0.2s ease;
    background: {{ block.settings.option_bg | default: '#FFFCF8' }};
  }

  .chocho-selector__option-{{ block_id }}:hover {
    border-color: {{ block.settings.border_hover | default: '#4A6B1A' }};
  }

  .chocho-selector__option-{{ block_id }}.active {
    border-color: {{ block.settings.active_border | default: '#4A6B1A' }};
    background: {{ block.settings.active_bg | default: '#FCF3EC' }};
  }

  .chocho-selector__option-{{ block_id }}.active::before {
    content: 'Most Popular';
    position: absolute;
    top: -10px;
    left: 16px;
    background: {{ block.settings.badge_bg | default: '#4A6B1A' }};
    color: white;
    font-size: 10px;
    font-weight: 700;
    text-transform: uppercase;
    padding: 4px 12px;
    border-radius: 20px;
    letter-spacing: 0.5px;
  }

  .chocho-selector__option-inner-{{ block_id }} {
    display: flex;
    align-items: flex-start;
    gap: 12px;
  }

  .chocho-selector__radio-{{ block_id }} {
    width: 20px;
    height: 20px;
    border: 2px solid {{ block.settings.radio_border | default: '#CCCCCC' }};
    border-radius: 50%;
    flex-shrink: 0;
    margin-top: 2px;
    position: relative;
    background: white;
    transition: all 0.2s;
  }

  .chocho-selector__option-{{ block_id }}.active .chocho-selector__radio-{{ block_id }} {
    border-color: {{ block.settings.active_radio | default: '#4A6B1A' }};
  }

  .chocho-selector__option-{{ block_id }}.active .chocho-selector__radio-{{ block_id }}::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 10px;
    height: 10px;
    background: {{ block.settings.active_radio | default: '#4A6B1A' }};
    border-radius: 50%;
  }

  .chocho-selector__option-content-{{ block_id }} {
    flex: 1;
    min-width: 0;
  }

  .chocho-selector__option-header-{{ block_id }} {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 4px;
  }

  .chocho-selector__option-title-{{ block_id }} {
    font-size: 16px;
    font-weight: 800;
    color: {{ block.settings.title_color | default: '#1a1a1a' }};
    margin: 0;
    line-height: 1.3;
  }

  .chocho-selector__option-subtitle-{{ block_id }} {
    font-size: 13px;
    color: {{ block.settings.subtitle_color | default: '#666666' }};
    margin: 2px 0 0;
  }

  .chocho-selector__option-price-{{ block_id }} {
    text-align: right;
  }

  .chocho-selector__price-main-{{ block_id }} {
    display: block;
    font-size: 18px;
    font-weight: 800;
    color: {{ block.settings.price_color | default: '#4A6B1A' }};
    line-height: 1.2;
  }

  .chocho-selector__price-main-{{ block_id }} s {
    color: {{ block.settings.compare_color | default: '#999999' }};
    font-weight: 400;
    font-size: 14px;
    margin-right: 6px;
    text-decoration: line-through;
  }

  .chocho-selector__price-per-{{ block_id }} {
    font-size: 12px;
    color: {{ block.settings.per_color | default: '#666666' }};
    font-weight: 400;
  }

  .chocho-selector__benefits-{{ block_id }} {
    margin: 12px 0 0 0;
    padding: 0;
    list-style: none;
  }

  .chocho-selector__benefits-{{ block_id }} li {
    position: relative;
    padding-left: 18px;
    font-size: 13px;
    color: {{ block.settings.benefit_color | default: '#555555' }};
    margin-bottom: 6px;
    line-height: 1.4;
  }

  .chocho-selector__benefits-{{ block_id }} li::before {
    content: '✓';
    position: absolute;
    left: 0;
    color: {{ block.settings.check_color | default: '#4A6B1A' }};
    font-weight: 700;
  }

  /* ===== SELECTOR DE PRODUCTOS/SABORES ===== */
  .chocho-selector__products-{{ block_id }} {
    margin-bottom: 20px;
  }

  .chocho-selector__products-label-{{ block_id }} {
    font-size: 14px;
    font-weight: 600;
    color: {{ block.settings.label_color | default: '#1a1a1a' }};
    margin-bottom: 12px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }

  .chocho-selector__product-list-{{ block_id }} {
    display: flex;
    flex-direction: column;
    gap: 10px;
  }

  .chocho-selector__product-{{ block_id }} {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px;
    background: white;
    border: 1px solid {{ block.settings.product_border | default: '#E8E4DF' }};
    border-radius: 10px;
    transition: all 0.2s;
  }

  .chocho-selector__product-{{ block_id }}:hover {
    border-color: {{ block.settings.border_hover | default: '#4A6B1A' }};
  }

  .chocho-selector__product-image-{{ block_id }} {
    width: 56px;
    height: 56px;
    border-radius: 8px;
    overflow: hidden;
    flex-shrink: 0;
    background: {{ block.settings.image_bg | default: '#f5f5f5' }};
  }

  .chocho-selector__product-image-{{ block_id }} img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .chocho-selector__product-info-{{ block_id }} {
    flex: 1;
    min-width: 0;
  }

  .chocho-selector__product-name-{{ block_id }} {
    font-size: 14px;
    font-weight: 600;
    color: {{ block.settings.product_name_color | default: '#1a1a1a' }};
    margin: 0 0 2px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  .chocho-selector__product-servings-{{ block_id }} {
    font-size: 12px;
    color: {{ block.settings.servings_color | default: '#888888' }};
  }

  /* ===== CONTROLES DE CANTIDAD ===== */
  .chocho-selector__quantity-{{ block_id }} {
    display: flex;
    align-items: center;
    gap: 8px;
  }

  .chocho-selector__qty-btn-{{ block_id }} {
    width: 32px;
    height: 32px;
    border: 1px solid {{ block.settings.qty_border | default: '#DDDDDD' }};
    background: white;
    border-radius: 6px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    font-size: 16px;
    color: {{ block.settings.qty_color | default: '#1a1a1a' }};
    transition: all 0.15s;
  }

  .chocho-selector__qty-btn-{{ block_id }}:hover:not(:disabled) {
    background: {{ block.settings.qty_hover_bg | default: '#f5f5f5' }};
    border-color: {{ block.settings.border_hover | default: '#4A6B1A' }};
  }

  .chocho-selector__qty-btn-{{ block_id }}:disabled {
    opacity: 0.3;
    cursor: not-allowed;
  }

  .chocho-selector__qty-display-{{ block_id }} {
    min-width: 28px;
    text-align: center;
    font-size: 15px;
    font-weight: 700;
    color: {{ block.settings.qty_color | default: '#1a1a1a' }};
  }

  /* ===== BARRA DE AHORRO ===== */
  .chocho-selector__savings-{{ block_id }} {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 14px 16px;
    background: {{ block.settings.savings_bg | default: '#F5F5F5' }};
    border-radius: 10px;
    margin-bottom: 16px;
    font-size: 14px;
  }

  .chocho-selector__savings-text-{{ block_id }} {
    color: {{ block.settings.savings_text_color | default: '#666666' }};
  }

  .chocho-selector__savings-amount-{{ block_id }} {
    color: {{ block.settings.savings_amount_color | default: '#4A6B1A' }};
    font-weight: 700;
  }

  .chocho-selector__savings-price-{{ block_id }} {
    font-weight: 700;
    color: {{ block.settings.title_color | default: '#1a1a1a' }};
  }

  .chocho-selector__savings-price-{{ block_id }} s {
    color: {{ block.settings.compare_color | default: '#999999' }};
    font-weight: 400;
    margin-right: 6px;
  }

  /* ===== BOTÓN PRINCIPAL ===== */
  .chocho-selector__submit-{{ block_id }} {
    width: 100%;
    padding: 18px 24px;
    background: {{ block.settings.button_bg | default: '#1a1a1a' }};
    color: {{ block.settings.button_text | default: '#ffffff' }};
    border: none;
    border-radius: 8px;
    font-size: 16px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    cursor: pointer;
    transition: all 0.2s;
    position: relative;
  }

  .chocho-selector__submit-{{ block_id }}:hover:not(:disabled) {
    background: {{ block.settings.button_hover | default: '#333333' }};
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
  }

  .chocho-selector__submit-{{ block_id }}:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  .chocho-selector__submit-{{ block_id }}.loading {
    color: transparent;
  }

  .chocho-selector__submit-{{ block_id }}.loading::after {
    content: '';
    position: absolute;
    width: 20px;
    height: 20px;
    top: 50%;
    left: 50%;
    margin: -10px 0 0 -10px;
    border: 2px solid white;
    border-radius: 50%;
    border-top-color: transparent;
    animation: spin 0.8s linear infinite;
  }

  @keyframes spin {
    to { transform: rotate(360deg); }
  }

  /* ===== UTILIDADES ===== */
  .visually-hidden {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    border: 0;
  }

  /* ===== RESPONSIVE ===== */
  @media (max-width: 749px) {
    .chocho-selector-{{ block_id }} {
      padding: 0 16px;
    }

    .chocho-selector__option-{{ block_id }} {
      padding: 16px 12px;
    }

    .chocho-selector__price-main-{{ block_id }} {
      font-size: 16px;
    }
  }
{% endstyle %}

<div class="chocho-selector-{{ block_id }}" data-chocho-selector>
  {% comment %} ===== OPCIÓN SUSCRIPCIÓN (Activa por defecto) ===== {% endcomment %}
  <div class="chocho-selector__purchase-options-{{ block_id }}">
    <div class="chocho-selector__option-{{ block_id }} active" data-option="subscription">
      <label class="chocho-selector__option-inner-{{ block_id }}">
        <input
          type="radio"
          name="purchase_type_{{ block_id }}"
          value="subscription"
          checked
          class="visually-hidden"
        >
        <span class="chocho-selector__radio-{{ block_id }}"></span>

        <div class="chocho-selector__option-content-{{ block_id }}">
          <div class="chocho-selector__option-header-{{ block_id }}">
            <div>
              <h3 class="chocho-selector__option-title-{{ block_id }}">
                {{ block.settings.sub_title | default: 'Subscribe & Save' }}
              </h3>
              <p class="chocho-selector__option-subtitle-{{ block_id }}">
                {{ block.settings.sub_subtitle | default: '15 servings per bag' }}
              </p>
            </div>
            <div class="chocho-selector__option-price-{{ block_id }}">
              <span class="chocho-selector__price-main-{{ block_id }}">
                <s data-compare-price>$00.00</s>
                <span data-subscription-price>$00.00</span>
              </span>
              <span class="chocho-selector__price-per-{{ block_id }}">
                <span data-price-per>$0.00</span> / {{ block.settings.per_text | default: 'serving' }}
              </span>
            </div>
          </div>

          {% if block.settings.show_benefits %}
            <ul class="chocho-selector__benefits-{{ block_id }}">
              {% for i in (1..4) %}
                {% assign benefit_key = 'benefit_' | append: i %}
                {% if block.settings[benefit_key] != blank %}
                  <li>{{ block.settings[benefit_key] }}</li>
                {% endif %}
              {% endfor %}
            </ul>
          {% endif %}
        </div>
      </label>
    </div>

    {% comment %} ===== OPCIÓN COMPRA ÚNICA ===== {% endcomment %}
    <div class="chocho-selector__option-{{ block_id }}" data-option="onetime">
      <label class="chocho-selector__option-inner-{{ block_id }}">
        <input
          type="radio"
          name="purchase_type_{{ block_id }}"
          value="onetime"
          class="visually-hidden"
        >
        <span class="chocho-selector__radio-{{ block_id }}"></span>

        <div class="chocho-selector__option-content-{{ block_id }}">
          <div class="chocho-selector__option-header-{{ block_id }}">
            <div>
              <h3 class="chocho-selector__option-title-{{ block_id }}">
                {{ block.settings.onetime_title | default: 'One-time purchase' }}
              </h3>
              <p class="chocho-selector__option-subtitle-{{ block_id }}">
                {{ block.settings.onetime_subtitle | default: '15 servings per bag' }}
              </p>
            </div>
            <div class="chocho-selector__option-price-{{ block_id }}">
              <span class="chocho-selector__price-main-{{ block_id }}" data-onetime-price> $00.00 </span>
              <span class="chocho-selector__price-per-{{ block_id }}">
                <span data-onetime-per>$0.00</span> / {{ block.settings.per_text | default: 'serving' }}
              </span>
            </div>
          </div>
        </div>
      </label>
    </div>
  </div>

  {% comment %} ===== SELECTOR DE PRODUCTOS ===== {% endcomment %}
  {% assign has_products = false %}

  {% for i in (1..5) %}
    {% capture product_key %}product_{{ i }}{% endcapture %}

    {% if block.settings[product_key] != blank %}
      {% assign has_products = true %}
      {% break %}
      {% comment %} Optimización: si ya encontró uno, no necesita seguir el loop {% endcomment %}
    {% endif %}
  {% endfor %}

  {% if has_products %}
    <div class="chocho-selector__products-{{ block_id }}">
      <p class="chocho-selector__products-label-{{ block_id }}">
        {{ block.settings.flavors_label | default: 'Choose your flavors' }}
      </p>

      <div class="chocho-selector__product-list-{{ block_id }}">
        {% for i in (1..5) %}
          {% assign product_key = 'product_' | append: i %}
          {% assign product = block.settings[product_key] %}

          {% if product != blank %}
            {% assign variant = product.selected_or_first_available_variant %}
            <div
              class="chocho-selector__product-{{ block_id }}"
              data-product-id="{{ product.id }}"
              data-variant-id="{{ variant.id }}"
              data-price="{{ variant.price }}"
              data-compare="{{ variant.compare_at_price | default: variant.price }}"
            >
              <div class="chocho-selector__product-image-{{ block_id }}">
                {% if product.featured_image %}
                  <img
                    src="{{ product.featured_image | image_url: width: 120, height: 120, crop: 'center' }}"
                    alt="{{ product.title | escape }}"
                    loading="lazy"
                    width="56"
                    height="56"
                  >
                {% else %}
                  {{ 'product-1' | placeholder_svg_tag }}
                {% endif %}
              </div>

              <div class="chocho-selector__product-info-{{ block_id }}">
                <h4 class="chocho-selector__product-name-{{ block_id }}">{{ product.title }}</h4>
                <span class="chocho-selector__product-servings-{{ block_id }}">
                  {{- block.settings.servings_text | default: '15 servings' -}}
                </span>
              </div>

              <div class="chocho-selector__quantity-{{ block_id }}">
                <button
                  type="button"
                  class="chocho-selector__qty-btn-{{ block_id }}"
                  data-qty="minus"
                  aria-label="Decrease"
                >
                  −
                </button>
                <span class="chocho-selector__qty-display-{{ block_id }}" data-quantity>0</span>
                <button
                  type="button"
                  class="chocho-selector__qty-btn-{{ block_id }}"
                  data-qty="plus"
                  aria-label="Increase"
                >
                  +
                </button>
              </div>
            </div>
          {% endif %}
        {% endfor %}
      </div>
    </div>

    {% comment %} ===== BARRA DE AHORRO ===== {% endcomment %}
    <div class="chocho-selector__savings-{{ block_id }}">
      <span class="chocho-selector__savings-text-{{ block_id }}">
        {{ block.settings.savings_label | default: "You're saving" }}
        <span class="chocho-selector__savings-amount-{{ block_id }}" data-savings>$0.00</span>
      </span>
      <span class="chocho-selector__savings-price-{{ block_id }}">
        <s data-total-compare>$0.00</s>
        <span data-total-price>$0.00</span>
      </span>
    </div>

    {% comment %} ===== BOTÓN ===== {% endcomment %}
    <button
      type="button"
      class="chocho-selector__submit-{{ block_id }}"
      data-add-to-cart
      disabled
    >
      {{ block.settings.button_text | default: 'Add to Cart' }}
    </button>

  {% else %}
    <p style="text-align: center; color: #666; padding: 40px;">Selecciona productos en la configuración del bloque</p>
  {% endif %}
</div>

<script>
  (function() {
    const container = document.querySelector('[data-chocho-selector]');
    if (!container) return;

    const blockId = '{{ block_id }}';

    // Datos de configuración
    const discountPercent = {{ block.settings.subscription_discount | default: 15 }};
    const servingsPerUnit = {{ block.settings.servings_per_unit | default: 15 }};

    // Elementos
    const options = container.querySelectorAll('[data-option]');
    const products = container.querySelectorAll('[data-product-id]');
    const savingsEl = container.querySelector('[data-savings]');
    const totalCompareEl = container.querySelector('[data-total-compare]');
    const totalPriceEl = container.querySelector('[data-total-price]');
    const subPriceEl = container.querySelector('[data-subscription-price]');
    const comparePriceEl = container.querySelector('[data-compare-price]');
    const pricePerEl = container.querySelector('[data-price-per]');
    const onetimePriceEl = container.querySelector('[data-onetime-price]');
    const onetimePerEl = container.querySelector('[data-onetime-per]');
    const submitBtn = container.querySelector('[data-add-to-cart]');

    // Estado
    let currentOption = 'subscription';
    let quantities = {};

    // Inicializar cantidades
    products.forEach(p => quantities[p.dataset.variantId] = 0);

    // Primer producto como referencia de precio
    const firstProduct = products[0];
    const basePrice = firstProduct ? parseInt(firstProduct.dataset.price) : 0;
    const baseCompare = firstProduct ? parseInt(firstProduct.dataset.compare) : basePrice;

    function formatMoney(cents) {
      return '$' + (cents / 100).toFixed(2);
    }

    function calculatePrices() {
      const subUnitPrice = Math.round(basePrice * (1 - discountPercent / 100));

      let totalQty = 0;
      let totalRegular = 0;
      let totalDiscounted = 0;

      products.forEach(p => {
        const qty = quantities[p.dataset.variantId] || 0;
        const price = parseInt(p.dataset.price);
        totalQty += qty;
        totalRegular += price * qty;
        totalDiscounted += (currentOption === 'subscription' ? Math.round(price * (1 - discountPercent / 100)) : price) * qty;
      });

      return {
        subUnit: subUnitPrice,
        onetimeUnit: basePrice,
        subPerServing: subUnitPrice / servingsPerUnit,
        onetimePerServing: basePrice / servingsPerUnit,
        totalQty: totalQty,
        totalRegular: totalRegular,
        totalDiscounted: totalDiscounted,
        savings: totalRegular - totalDiscounted
      };
    }

    function updateDisplay() {
      const prices = calculatePrices();

      // Precios de opciones
      if (subPriceEl) subPriceEl.textContent = formatMoney(prices.subUnit);
      if (comparePriceEl) comparePriceEl.textContent = formatMoney(baseCompare);
      if (pricePerEl) pricePerEl.textContent = formatMoney(prices.subPerServing);
      if (onetimePriceEl) onetimePriceEl.textContent = formatMoney(prices.onetimeUnit);
      if (onetimePerEl) onetimePerEl.textContent = formatMoney(prices.onetimePerServing);

      // Totales
      if (savingsEl) savingsEl.textContent = formatMoney(prices.savings);
      if (totalCompareEl) totalCompareEl.textContent = formatMoney(prices.totalRegular);
      if (totalPriceEl) totalPriceEl.textContent = formatMoney(prices.totalDiscounted);

      // Botón
      const hasItems = prices.totalQty > 0;
      submitBtn.disabled = !hasItems;
      submitBtn.textContent = hasItems
        ? '{{ block.settings.button_text | default: "Add to Cart" }} - ' + formatMoney(prices.totalDiscounted)
        : '{{ block.settings.button_text | default: "Add to Cart" }}';
    }

    // Event listeners

    // Cambio de opción (subscription vs onetime)
    options.forEach(opt => {
      opt.addEventListener('click', function() {
        currentOption = this.dataset.option;

        options.forEach(o => {
          o.classList.toggle('active', o === this);
          o.querySelector('input').checked = (o === this);
        });

        updateDisplay();
      });
    });

    // Cantidades
    products.forEach(product => {
      const variantId = product.dataset.variantId;
      const minusBtn = product.querySelector('[data-qty="minus"]');
      const plusBtn = product.querySelector('[data-qty="plus"]');
      const display = product.querySelector('[data-quantity]');

      minusBtn.addEventListener('click', () => {
        const current = quantities[variantId] || 0;
        if (current > 0) {
          quantities[variantId] = current - 1;
          display.textContent = quantities[variantId];
          minusBtn.disabled = quantities[variantId] === 0;
          updateDisplay();
        }
      });

      plusBtn.addEventListener('click', () => {
        const current = quantities[variantId] || 0;
        quantities[variantId] = current + 1;
        display.textContent = quantities[variantId];
        minusBtn.disabled = false;
        updateDisplay();
      });
    });

    // Add to cart
    submitBtn.addEventListener('click', async () => {
      const items = [];
      const sellingPlanId = '{{ block.settings.selling_plan_id }}';

      products.forEach(p => {
        const qty = quantities[p.dataset.variantId];
        if (qty > 0) {
          const item = {
            id: p.dataset.variantId,
            quantity: qty
          };
          if (currentOption === 'subscription' && sellingPlanId) {
            item.selling_plan = sellingPlanId;
          }
          items.push(item);
        }
      });

      if (items.length === 0) return;

      submitBtn.classList.add('loading');
      submitBtn.disabled = true;

      try {
        const response = await fetch('/cart/add.js', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ items })
        });

        if (response.ok) {
          // Abrir cart drawer o redirigir
          const cartDrawer = document.querySelector('cart-drawer-component');
          if (cartDrawer && typeof cartDrawer.open === 'function') {
            cartDrawer.open();
          } else {
            window.location.href = '/cart';
          }
        } else {
          throw new Error('Error adding to cart');
        }
      } catch (err) {
        alert('Error: ' + err.message);
        submitBtn.classList.remove('loading');
        submitBtn.disabled = false;
      }
    });

    // Inicializar
    updateDisplay();
  })();
</script>

{% schema %}
{
  "name": "Chocho Style Selector",
  "tag": null,
  "settings": [
    {
      "type": "header",
      "content": "Subscription Option"
    },
    {
      "type": "text",
      "id": "sub_title",
      "label": "Title",
      "default": "Subscribe & Save"
    },
    {
      "type": "text",
      "id": "sub_subtitle",
      "label": "Subtitle",
      "default": "15 servings per bag"
    },
    {
      "type": "range",
      "id": "subscription_discount",
      "label": "Discount %",
      "min": 5,
      "max": 50,
      "step": 5,
      "unit": "%",
      "default": 15
    },
    {
      "type": "checkbox",
      "id": "show_benefits",
      "label": "Show benefits",
      "default": true
    },
    {
      "type": "text",
      "id": "benefit_1",
      "label": "Benefit 1",
      "default": "Save $10/bag on every order"
    },
    {
      "type": "text",
      "id": "benefit_2",
      "label": "Benefit 2",
      "default": "Easily change your quantities"
    },
    {
      "type": "text",
      "id": "benefit_3",
      "label": "Benefit 3",
      "default": "Cancel any time"
    },
    {
      "type": "text",
      "id": "benefit_4",
      "label": "Benefit 4",
      "default": "Pre-shipment reminders"
    },
    {
      "type": "header",
      "content": "One-time Option"
    },
    {
      "type": "text",
      "id": "onetime_title",
      "label": "Title",
      "default": "One-time purchase"
    },
    {
      "type": "text",
      "id": "onetime_subtitle",
      "label": "Subtitle",
      "default": "15 servings per bag"
    },
    {
      "type": "header",
      "content": "Products"
    },
    {
      "type": "text",
      "id": "flavors_label",
      "label": "Flavors label",
      "default": "Choose your flavors"
    },
    {
      "type": "product",
      "id": "product_1",
      "label": "Product 1"
    },
    {
      "type": "product",
      "id": "product_2",
      "label": "Product 2"
    },
    {
      "type": "product",
      "id": "product_3",
      "label": "Product 3"
    },
    {
      "type": "product",
      "id": "product_4",
      "label": "Product 4"
    },
    {
      "type": "product",
      "id": "product_5",
      "label": "Product 5"
    },
    {
      "type": "text",
      "id": "servings_text",
      "label": "Servings text",
      "default": "15 servings"
    },
    {
      "type": "text",
      "id": "per_text",
      "label": "Per unit text",
      "default": "serving"
    },
    {
      "type": "number",
      "id": "servings_per_unit",
      "label": "Servings per unit",
      "default": 15
    },
    {
      "type": "header",
      "content": "Selling Plan"
    },
    {
      "type": "text",
      "id": "selling_plan_id",
      "label": "Selling Plan ID",
      "info": "ID del plan de suscripción de Shopify"
    },
    {
      "type": "header",
      "content": "Savings Bar"
    },
    {
      "type": "text",
      "id": "savings_label",
      "label": "Savings label",
      "default": "You're saving"
    },
    {
      "type": "header",
      "content": "Button"
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "Button text",
      "default": "Add to Cart"
    },
    {
      "type": "header",
      "content": "Colors"
    },
    {
      "type": "color",
      "id": "badge_bg",
      "label": "Badge background",
      "default": "#4A6B1A"
    },
    {
      "type": "color",
      "id": "active_border",
      "label": "Active border",
      "default": "#4A6B1A"
    },
    {
      "type": "color",
      "id": "active_bg",
      "label": "Active background",
      "default": "#FCF3EC"
    },
    {
      "type": "color",
      "id": "price_color",
      "label": "Price color",
      "default": "#4A6B1A"
    },
    {
      "type": "color",
      "id": "button_bg",
      "label": "Button background",
      "default": "#1a1a1a"
    }
  ],
  "presets": [
    {
      "name": "Chocho Style Selector"
    }
  ]
}
{% endschema %}
