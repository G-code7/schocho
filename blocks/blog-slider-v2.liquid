{%- style -%}
  .pc-blog-slider-{{ section.id }} {
    --pc-bg: {{ section.settings.background_color }};
    --pc-content-bg: {{ section.settings.content_background_color }};
    --pc-title-color: {{ section.settings.title_color }};
    --pc-eyebrow-color: {{ section.settings.eyebrow_color }};
    --pc-text-color: {{ section.settings.description_color }};
    --pc-accent: {{ section.settings.accent_color }};
    --pc-btn-bg: {{ section.settings.button_background }};
    --pc-btn-text: {{ section.settings.button_text_color }};
    --pc-btn-hover-bg: {{ section.settings.button_hover_background }};
    --pc-border-color: {{ section.settings.border_color }};
    
    display: block;
    width: 100%;
    background-color: var(--pc-bg);
    padding: {{ section.settings.padding_top }}px 0 {{ section.settings.padding_bottom }}px;
    position: relative;
  }

  .pc-blog-slider__container-{{ section.id }} {
    max-width: var(--page-width, 1200px);
    margin: 0 auto;
    padding: 0 {{ section.settings.horizontal_padding }}px;
    position: relative;
  }

  /* Section Header */
  .pc-blog-slider__header-{{ section.id }} {
    text-align: {{ section.settings.header_alignment }};
    margin-bottom: 40px;
  }

  .pc-blog-slider__section-eyebrow-{{ section.id }} {
    font-size: 12px;
    letter-spacing: 0.15em;
    text-transform: uppercase;
    color: var(--pc-eyebrow-color);
    margin-bottom: 12px;
    font-weight: 500;
    display: block;
  }

  .pc-blog-slider__section-title-{{ section.id }} {
    font-size: {{ section.settings.section_title_size }}px;
    color: var(--pc-title-color);
    margin: 0;
    font-weight: 400;
    line-height: 1.2;
  }

  /* Slider Track */
  .pc-blog-slider__viewport-{{ section.id }} {
    overflow: hidden;
    position: relative;
  }

  .pc-blog-slider__track-{{ section.id }} {
    display: flex;
    transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
    will-change: transform;
  }

  /* Slide Layout */
  .pc-blog-slider__slide-{{ section.id }} {
    min-width: 100%;
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: {{ section.settings.columns_gap }}px;
    align-items: stretch;
    flex-shrink: 0;
  }

  {%- if section.settings.layout_direction == 'image_first' -%}
  .pc-blog-slider__slide-{{ section.id }} {
    direction: rtl;
  }
  .pc-blog-slider__slide-{{ section.id }} > * {
    direction: ltr;
  }
  {%- endif -%}

  /* Content Column */
  .pc-blog-slider__content-{{ section.id }} {
    display: flex;
    flex-direction: column;
    justify-content: center;
    background-color: var(--pc-content-bg);
    padding: {{ section.settings.content_padding }}px;
    border-radius: {{ section.settings.content_border_radius }}px;
    position: relative;
    {%- if section.settings.content_aspect_ratio != 'auto' -%}
    aspect-ratio: {{ section.settings.content_aspect_ratio }};
    {%- endif -%}
    {%- if section.settings.show_content_border -%}
    border: 1px solid var(--pc-border-color);
    {%- endif -%}
  }

  .pc-blog-slider__content-inner-{{ section.id }} {
    display: flex;
    flex-direction: column;
    gap: 20px;
    align-items: {{ section.settings.content_alignment }};
    text-align: {{ section.settings.content_text_alignment }};
  }

  /* Eyebrow / Category */
  .pc-blog-slider__eyebrow-{{ section.id }} {
    font-size: {{ section.settings.eyebrow_size }}px;
    letter-spacing: 0.12em;
    text-transform: uppercase;
    color: var(--pc-eyebrow-color);
    font-weight: 500;
    display: inline-block;
    line-height: 1.2;
  }

  {%- if section.settings.eyebrow_style == 'underline' -%}
  .pc-blog-slider__eyebrow-{{ section.id }} {
    position: relative;
    padding-bottom: 8px;
  }
  .pc-blog-slider__eyebrow-{{ section.id }}::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    width: 30px;
    height: 2px;
    background-color: var(--pc-accent);
  }
  .pc-blog-slider__content-inner-{{ section.id }}[style*="center"] .pc-blog-slider__eyebrow-{{ section.id }}::after {
    left: 50%;
    transform: translateX(-50%);
  }
  {%- endif -%}

  /* Title */
  .pc-blog-slider__title-{{ section.id }} {
    font-size: {{ section.settings.title_size }}px;
    color: var(--pc-title-color);
    margin: 0;
    line-height: 1.25;
    font-weight: {{ section.settings.title_weight }};
  }

  .pc-blog-slider__title-{{ section.id }} a {
    color: inherit;
    text-decoration: none;
  }

  .pc-blog-slider__title-{{ section.id }} a:hover {
    text-decoration: underline;
  }

  /* Description */
  .pc-blog-slider__description-{{ section.id }} {
    font-size: {{ section.settings.description_size }}px;
    color: var(--pc-text-color);
    line-height: 1.7;
    margin: 0;
  }

  /* Reading Time / Meta */
  .pc-blog-slider__meta-{{ section.id }} {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 13px;
    color: var(--pc-text-color);
    opacity: 0.7;
  }

  .pc-blog-slider__meta-{{ section.id }} svg {
    width: 14px;
    height: 14px;
  }

  /* Button */
  .pc-blog-slider__button-wrapper-{{ section.id }} {
    display: flex;
    align-items: center;
    gap: 16px;
    margin-top: 8px;
  }

  .pc-blog-slider__button-{{ section.id }} {
    display: inline-flex;
    align-items: center;
    gap: 12px;
    padding: {{ section.settings.button_padding_y }}px {{ section.settings.button_padding_x }}px;
    background-color: var(--pc-btn-bg);
    color: var(--pc-btn-text);
    text-decoration: none;
    border-radius: {{ section.settings.button_border_radius }}px;
    font-size: {{ section.settings.button_text_size }}px;
    font-weight: 500;
    letter-spacing: 0.02em;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
    overflow: hidden;
    border: none;
    cursor: pointer;
  }

  .pc-blog-slider__button-{{ section.id }}:hover {
    background-color: var(--pc-btn-hover-bg);
    transform: translateX(4px);
  }

  .pc-blog-slider__button-{{ section.id }} svg {
    width: 16px;
    height: 16px;
    transition: transform 0.3s ease;
  }

  .pc-blog-slider__button-{{ section.id }}:hover svg {
    transform: translateX(4px);
  }

  /* Animated Arrow Button */
  .pc-blog-slider__arrow-btn-{{ section.id }} {
    position: relative;
    width: 64px;
    height: 32px;
    overflow: hidden;
    flex-shrink: 0;
    cursor: pointer;
    text-decoration: none;
    display: block;
  }

  .pc-blog-slider__arrow-btn-svg-{{ section.id }} {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
  }

  .pc-blog-slider__arrow-btn-bg-{{ section.id }} {
    fill: none;
    stroke: var(--pc-border-color);
    stroke-width: 1;
  }

  .pc-blog-slider__arrow-btn-fill-{{ section.id }} {
    fill: none;
    stroke: var(--pc-accent);
    stroke-width: 1.5;
    stroke-dasharray: 118;
    stroke-dashoffset: 118;
    transition: stroke-dashoffset 0.6s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .pc-blog-slider__arrow-btn-{{ section.id }}:hover .pc-blog-slider__arrow-btn-fill-{{ section.id }} {
    stroke-dashoffset: 0;
  }

  .pc-blog-slider__arrow-icon-{{ section.id }} {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    color: var(--pc-title-color);
  }

  .pc-blog-slider__arrow-btn-{{ section.id }}:hover .pc-blog-slider__arrow-icon-{{ section.id }} {
    transform: translate(-30%, -50%);
  }

  .pc-blog-slider__arrow-icon-second-{{ section.id }} {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-150%, -50%);
    transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    color: var(--pc-title-color);
    opacity: 0;
  }

  .pc-blog-slider__arrow-btn-{{ section.id }}:hover .pc-blog-slider__arrow-icon-second-{{ section.id }} {
    transform: translate(-50%, -50%);
    opacity: 1;
  }

  /* Image Column */
  .pc-blog-slider__image-wrapper-{{ section.id }} {
    position: relative;
    overflow: hidden;
    border-radius: {{ section.settings.image_border_radius }}px;
    background-color: {{ section.settings.image_background_color }};
    {%- if section.settings.image_aspect_ratio != 'auto' -%}
    aspect-ratio: {{ section.settings.image_aspect_ratio }};
    {%- else -%}
    aspect-ratio: 1 / 1;
    {%- endif -%}
  }

  .pc-blog-slider__image-{{ section.id }} {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .pc-blog-slider__slide-{{ section.id }}:hover .pc-blog-slider__image-{{ section.id }} {
    transform: scale(1.03);
  }

  .pc-blog-slider__image-placeholder-{{ section.id }} {
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: #f5f3ef;
  }

  .pc-blog-slider__image-placeholder-{{ section.id }} svg {
    width: 60%;
    height: 60%;
    max-width: 200px;
    opacity: 0.4;
  }

  /* Date Badge */
  .pc-blog-slider__date-badge-{{ section.id }} {
    position: absolute;
    top: 16px;
    left: 16px;
    background-color: rgba(255, 255, 255, 0.95);
    padding: 8px 14px;
    border-radius: 4px;
    font-size: 12px;
    font-weight: 500;
    color: var(--pc-title-color);
    letter-spacing: 0.02em;
    backdrop-filter: blur(4px);
    z-index: 2;
    pointer-events: none;
  }

  /* Navigation Controls */
  .pc-blog-slider__controls-{{ section.id }} {
    display: flex;
    justify-content: {{ section.settings.controls_alignment }};
    align-items: center;
    gap: 24px;
    margin-top: {{ section.settings.controls_margin_top }}px;
    flex-wrap: wrap;
  }

  .pc-blog-slider__nav-{{ section.id }} {
    display: flex;
    gap: 12px;
  }

  .pc-blog-slider__arrow-{{ section.id }} {
    background-color: {{ section.settings.arrow_background }};
    color: {{ section.settings.arrow_color }};
    border: 1px solid {{ section.settings.arrow_border_color }};
    width: {{ section.settings.arrow_size }}px;
    height: {{ section.settings.arrow_size }}px;
    border-radius: {{ section.settings.arrow_border_radius }}px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
    padding: 0;
  }

  .pc-blog-slider__arrow-{{ section.id }}:hover:not(:disabled) {
    background-color: {{ section.settings.arrow_hover_background }};
    border-color: {{ section.settings.arrow_hover_background }};
    color: {{ section.settings.arrow_hover_color }};
  }

  .pc-blog-slider__arrow-{{ section.id }}:disabled {
    opacity: 0.3;
    cursor: not-allowed;
  }

  .pc-blog-slider__arrow-{{ section.id }} svg {
    width: 20px;
    height: 20px;
  }

  /* Dots / Indicators */
  .pc-blog-slider__dots-{{ section.id }} {
    display: flex;
    gap: {{ section.settings.dot_gap }}px;
    align-items: center;
  }

  .pc-blog-slider__dot-{{ section.id }} {
    width: {{ section.settings.dot_size }}px;
    height: {{ section.settings.dot_size }}px;
    border-radius: {{ section.settings.dot_border_radius }}px;
    background-color: {{ section.settings.dot_color }};
    border: none;
    cursor: pointer;
    transition: all 0.3s ease;
    opacity: 0.4;
    padding: 0;
  }

  .pc-blog-slider__dot-{{ section.id }}.active {
    background-color: {{ section.settings.dot_active_color }};
    opacity: 1;
    {%- if section.settings.dot_active_scale -%}
    transform: scale(1.2);
    {%- endif -%}
  }

  .pc-blog-slider__dot-{{ section.id }}:hover:not(.active) {
    opacity: 0.7;
  }

  /* Progress Bar Style Indicator */
  {%- if section.settings.indicator_style == 'progress' -%}
  .pc-blog-slider__progress-{{ section.id }} {
    display: flex;
    gap: 8px;
    align-items: center;
  }

  .pc-blog-slider__progress-bar-{{ section.id }} {
    width: 60px;
    height: 3px;
    background-color: var(--pc-border-color);
    border-radius: 2px;
    overflow: hidden;
    cursor: pointer;
  }

  .pc-blog-slider__progress-bar-{{ section.id }}.active {
    background-color: var(--pc-accent);
  }
  {%- endif -%}

  /* Counter */
  .pc-blog-slider__counter-{{ section.id }} {
    font-size: 14px;
    color: var(--pc-text-color);
    font-weight: 500;
    letter-spacing: 0.05em;
  }

  .pc-blog-slider__counter-current-{{ section.id }} {
    color: var(--pc-title-color);
  }

  /* Empty State */
  .pc-blog-slider__empty-{{ section.id }} {
    text-align: center;
    padding: 80px 40px;
    color: var(--pc-text-color);
    font-size: 16px;
    background-color: var(--pc-content-bg);
    border-radius: 12px;
    border: 1px solid var(--pc-border-color);
  }

  /* RESPONSIVE STYLES */
  @media screen and (max-width: 990px) {
    .pc-blog-slider__slide-{{ section.id }} {
      grid-template-columns: 1fr;
      gap: 24px;
    }

    {%- if section.settings.mobile_image_position == 'top' -%}
    .pc-blog-slider__content-{{ section.id }} {
      order: 2;
    }
    .pc-blog-slider__image-wrapper-{{ section.id }} {
      order: 1;
    }
    {%- endif -%}

    .pc-blog-slider__content-{{ section.id }} {
      aspect-ratio: auto;
      padding: {{ section.settings.content_padding | times: 0.75 | round }}px;
    }

    .pc-blog-slider__image-wrapper-{{ section.id }} {
      aspect-ratio: {{ section.settings.mobile_image_aspect_ratio }};
    }

    .pc-blog-slider__title-{{ section.id }} {
      font-size: {{ section.settings.title_size | times: 0.85 | round }}px;
    }

    .pc-blog-slider__section-title-{{ section.id }} {
      font-size: {{ section.settings.section_title_size | times: 0.9 | round }}px;
    }
  }

  @media screen and (max-width: 749px) {
    .pc-blog-slider-{{ section.id }} {
      padding: {{ section.settings.padding_top | times: 0.7 | round }}px 0 {{ section.settings.padding_bottom | times: 0.7 | round }}px;
    }

    .pc-blog-slider__container-{{ section.id }} {
      padding: 0 20px;
    }

    .pc-blog-slider__header-{{ section.id }} {
      margin-bottom: 32px;
    }

    .pc-blog-slider__content-{{ section.id }} {
      padding: 32px;
    }

    .pc-blog-slider__title-{{ section.id }} {
      font-size: {{ section.settings.title_size | times: 0.75 | round }}px;
    }

    .pc-blog-slider__description-{{ section.id }} {
      font-size: {{ section.settings.description_size | times: 0.9 | round }}px;
    }

    .pc-blog-slider__controls-{{ section.id }} {
      justify-content: center;
    }
  }

  /* Reduced Motion */
  @media (prefers-reduced-motion: reduce) {
    .pc-blog-slider__track-{{ section.id }},
    .pc-blog-slider__image-{{ section.id }},
    .pc-blog-slider__button-{{ section.id }},
    .pc-blog-slider__arrow-btn-fill-{{ section.id }},
    .pc-blog-slider__arrow-icon-{{ section.id }},
    .pc-blog-slider__arrow-icon-second-{{ section.id }} {
      transition: none;
    }

    .pc-blog-slider__slide-{{ section.id }}:hover .pc-blog-slider__image-{{ section.id }} {
      transform: none;
    }
  }
{%- endstyle -%}

<section class="pc-blog-slider-{{ section.id }}" data-section-id="{{ section.id }}">
  <div class="pc-blog-slider__container-{{ section.id }}">
    
    {%- if section.settings.section_eyebrow != blank or section.settings.section_title != blank -%}
      <div class="pc-blog-slider__header-{{ section.id }}">
        {%- if section.settings.section_eyebrow != blank -%}
          <p class="pc-blog-slider__section-eyebrow-{{ section.id }}">{{ section.settings.section_eyebrow | escape }}</p>
        {%- endif -%}
        {%- if section.settings.section_title != blank -%}
          <h2 class="pc-blog-slider__section-title-{{ section.id }}">{{ section.settings.section_title | escape }}</h2>
        {%- endif -%}
      </div>
    {%- endif -%}

    {%- assign blog = section.settings.blog -%}
    {%- if blog != blank and blog.articles_count > 0 -%}
      {%- assign articles_limit = section.settings.articles_limit | at_most: blog.articles_count -%}
      
      <div class="pc-blog-slider__viewport-{{ section.id }}">
        <div class="pc-blog-slider__track-{{ section.id }}" data-track>
          {%- for article in blog.articles limit: articles_limit -%}
            <div class="pc-blog-slider__slide-{{ section.id }}" data-slide="{{ forloop.index0 }}">
              
              <!-- Content Column -->
              <div class="pc-blog-slider__content-{{ section.id }}">
                <div class="pc-blog-slider__content-inner-{{ section.id }}">
                  
                  {%- if section.settings.show_eyebrow -%}
                    {%- assign eyebrow_text = '' -%}
                    {%- case section.settings.eyebrow_source -%}
                      {%- when 'blog_title' -%}
                        {%- assign eyebrow_text = blog.title -%}
                      {%- when 'custom' -%}
                        {%- assign eyebrow_text = section.settings.custom_eyebrow -%}
                      {%- when 'first_tag' -%}
                        {%- if article.tags.size > 0 -%}
                          {%- assign eyebrow_text = article.tags.first -%}
                        {%- endif -%}
                    {%- endcase -%}
                    
                    {%- if eyebrow_text != blank -%}
                      <span class="pc-blog-slider__eyebrow-{{ section.id }}">{{ eyebrow_text | escape }}</span>
                    {%- endif -%}
                  {%- endif -%}

                  <h3 class="pc-blog-slider__title-{{ section.id }}">
                    <a href="{{ article.url }}">
                      {{ article.title | escape }}
                    </a>
                  </h3>

                  {%- if section.settings.show_description -%}
                    <p class="pc-blog-slider__description-{{ section.id }}">
                      {%- if article.excerpt != blank -%}
                        {{ article.excerpt | strip_html | truncate: section.settings.description_length }}
                      {%- else -%}
                        {{ article.content | strip_html | truncate: section.settings.description_length }}
                      {%- endif -%}
                    </p>
                  {%- endif -%}

                  {%- if section.settings.show_read_time -%}
                    {%- assign words = article.content | strip_html | split: ' ' | size -%}
                    {%- assign read_time = words | divided_by: 200 | at_least: 1 -%}
                    <div class="pc-blog-slider__meta-{{ section.id }}">
                      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"/>
                        <polyline points="12 6 12 12 16 14"/>
                      </svg>
                      <span>{{ read_time }} min read</span>
                    </div>
                  {%- endif -%}

                  {%- if section.settings.show_button -%}
                    <div class="pc-blog-slider__button-wrapper-{{ section.id }}">
                      {%- if section.settings.button_style == 'solid' -%}
                        <a href="{{ article.url }}" class="pc-blog-slider__button-{{ section.id }}">
                          {{ section.settings.button_text | escape }}
                          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="5" y1="12" x2="19" y2="12"/>
                            <polyline points="12 5 19 12 12 19"/>
                          </svg>
                        </a>
                      {%- else -%}
                        <a href="{{ article.url }}" class="pc-blog-slider__arrow-btn-{{ section.id }}" aria-label="{{ section.settings.button_text | escape }}">
                          <svg class="pc-blog-slider__arrow-btn-svg-{{ section.id }}" width="64" height="32" viewBox="0 0 64 32" fill="none">
                            <path class="pc-blog-slider__arrow-btn-bg-{{ section.id }}" d="M16 1h32a15 15 0 0 1 0 30H16a15 15 0 0 1 0-30z"/>
                            <path class="pc-blog-slider__arrow-btn-fill-{{ section.id }}" d="M16 1h32a15 15 0 0 1 0 30H16a15 15 0 0 1 0-30z"/>
                          </svg>
                          <svg class="pc-blog-slider__arrow-icon-{{ section.id }}" width="12" height="10" viewBox="0 0 12 10" fill="none">
                            <path d="M1 5L11 5M11 5L6.71429 1M11 5L6.71429 9" stroke="currentColor" stroke-width="1.2" stroke-linecap="square"/>
                          </svg>
                          <svg class="pc-blog-slider__arrow-icon-second-{{ section.id }}" width="12" height="10" viewBox="0 0 12 10" fill="none">
                            <path d="M1 5L11 5M11 5L6.71429 1M11 5L6.71429 9" stroke="currentColor" stroke-width="1.2" stroke-linecap="square"/>
                          </svg>
                        </a>
                        <span class="pc-blog-slider__meta-{{ section.id }}">{{ section.settings.button_text | escape }}</span>
                      {%- endif -%}
                    </div>
                  {%- endif -%}

                </div>
              </div>

              <!-- Image Column -->
              <div class="pc-blog-slider__image-wrapper-{{ section.id }}">
                {%- if section.settings.show_date_badge -%}
                  <div class="pc-blog-slider__date-badge-{{ section.id }}">
                    {{ article.published_at | time_tag: format: section.settings.date_format }}
                  </div>
                {%- endif -%}

                {%- if article.image -%}
                  <a href="{{ article.url }}">
                    <img
                      src="{{ article.image | image_url: width: 800 }}"
                      srcset="
                        {{ article.image | image_url: width: 400 }} 400w,
                        {{ article.image | image_url: width: 600 }} 600w,
                        {{ article.image | image_url: width: 800 }} 800w,
                        {{ article.image | image_url: width: 1000 }} 1000w,
                        {{ article.image | image_url: width: 1200 }} 1200w
                      "
                      sizes="(max-width: 749px) 100vw, 50vw"
                      alt="{{ article.image.alt | escape | default: article.title | escape }}"
                      class="pc-blog-slider__image-{{ section.id }}"
                      loading="lazy"
                      width="{{ article.image.width }}"
                      height="{{ article.image.height }}"
                    >
                  </a>
                {%- else -%}
                  <div class="pc-blog-slider__image-placeholder-{{ section.id }}">
                    {{ 'image' | placeholder_svg_tag: 'placeholder-svg' }}
                  </div>
                {%- endif -%}
              </div>

            </div>
          {%- endfor -%}
        </div>
      </div>

      {%- if articles_limit > 1 and section.settings.show_controls -%}
        <div class="pc-blog-slider__controls-{{ section.id }}">
          
          {%- if section.settings.show_arrows -%}
            <div class="pc-blog-slider__nav-{{ section.id }}">
              <button class="pc-blog-slider__arrow-{{ section.id }}" data-prev aria-label="Previous slide" {% if section.settings.disable_loop and forloop.first %}disabled{% endif %}>
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <polyline points="15 18 9 12 15 6"/>
                </svg>
              </button>
              <button class="pc-blog-slider__arrow-{{ section.id }}" data-next aria-label="Next slide">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <polyline points="9 18 15 12 9 6"/>
                </svg>
              </button>
            </div>
          {%- endif -%}

          {%- if section.settings.show_counter -%}
            <div class="pc-blog-slider__counter-{{ section.id }}">
              <span class="pc-blog-slider__counter-current-{{ section.id }}" data-current>01</span>
              <span>/</span>
              <span data-total>{{ articles_limit | prepend: '00' | slice: -2, 2 }}</span>
            </div>
          {%- endif -%}

          {%- if section.settings.show_dots -%}
            {%- if section.settings.indicator_style == 'dots' -%}
              <div class="pc-blog-slider__dots-{{ section.id }}" data-dots>
                {%- for i in (1..articles_limit) -%}
                  <button 
                    class="pc-blog-slider__dot-{{ section.id }} {% if forloop.first %}active{% endif %}" 
                    data-index="{{ forloop.index0 }}"
                    aria-label="Go to slide {{ forloop.index }}"
                  ></button>
                {%- endfor -%}
              </div>
            {%- elsif section.settings.indicator_style == 'progress' -%}
              <div class="pc-blog-slider__progress-{{ section.id }}" data-progress>
                {%- for i in (1..articles_limit) -%}
                  <div 
                    class="pc-blog-slider__progress-bar-{{ section.id }} {% if forloop.first %}active{% endif %}" 
                    data-index="{{ forloop.index0 }}"
                  ></div>
                {%- endfor -%}
              </div>
            {%- endif -%}
          {%- endif -%}

        </div>
      {%- endif -%}

    {%- else -%}
      <div class="pc-blog-slider__empty-{{ section.id }}">
        <p>{{ section.settings.empty_message | escape }}</p>
        {%- if blog == blank -%}
          <p style="margin-top: 10px; font-size: 14px;">Please select a blog in the section settings</p>
        {%- endif -%}
      </div>
    {%- endif -%}

  </div>
</section>

<script>
(function() {
  'use strict';
  
  const section = document.querySelector('[data-section-id="{{ section.id }}"]');
  if (!section) return;
  
  const track = section.querySelector('[data-track]');
  if (!track) return;
  
  const slides = section.querySelectorAll('[data-slide]');
  const prevBtn = section.querySelector('[data-prev]');
  const nextBtn = section.querySelector('[data-next]');
  const dots = section.querySelectorAll('[data-dot]') || section.querySelectorAll('[data-progress] [data-index]');
  const counterCurrent = section.querySelector('[data-current]');
  const counterTotal = section.querySelector('[data-total]');
  
  const totalSlides = slides.length;
  if (totalSlides <= 1) {
    // Hide controls if only one slide
    const controls = section.querySelector('.pc-blog-slider__controls-{{ section.id }}');
    if (controls) controls.style.display = 'none';
    return;
  }
  
  let currentIndex = 0;
  const loop = !{{ section.settings.disable_loop | default: false }};
  const autoplay = {{ section.settings.autoplay | default: false }};
  const autoplayDelay = {{ section.settings.autoplay_delay | default: 5000 }};
  let autoplayTimer = null;
  let isAnimating = false;
  
  function updateSlider() {
    if (isAnimating) return;
    isAnimating = true;
    
    // Update track position
    track.style.transform = `translateX(-${currentIndex * 100}%)`;
    
    // Update dots
    if (dots.length > 0) {
      dots.forEach((dot, index) => {
        if (dot.classList) {
          dot.classList.toggle('active', index === currentIndex);
        }
      });
    }
    
    // Update counter
    if (counterCurrent) {
      counterCurrent.textContent = (currentIndex + 1).toString().padStart(2, '0');
    }
    
    // Update arrow states if loop is disabled
    if (!loop) {
      if (prevBtn) prevBtn.disabled = currentIndex === 0;
      if (nextBtn) nextBtn.disabled = currentIndex === totalSlides - 1;
    }
    
    // Reset animation flag after transition
    setTimeout(() => {
      isAnimating = false;
    }, 600);
  }
  
  function goToSlide(index) {
    if (isAnimating) return;
    
    if (index < 0) {
      currentIndex = loop ? totalSlides - 1 : 0;
    } else if (index >= totalSlides) {
      currentIndex = loop ? 0 : totalSlides - 1;
    } else {
      currentIndex = index;
    }
    
    updateSlider();
    resetAutoplay();
  }
  
  function nextSlide() {
    goToSlide(currentIndex + 1);
  }
  
  function prevSlide() {
    goToSlide(currentIndex - 1);
  }
  
  function startAutoplay() {
    if (!autoplay || autoplayDelay < 1000) return;
    
    stopAutoplay();
    autoplayTimer = setInterval(() => {
      nextSlide();
    }, autoplayDelay);
  }
  
  function stopAutoplay() {
    if (autoplayTimer) {
      clearInterval(autoplayTimer);
      autoplayTimer = null;
    }
  }
  
  function resetAutoplay() {
    if (autoplay) {
      stopAutoplay();
      startAutoplay();
    }
  }
  
  // Event Listeners
  if (prevBtn) {
    prevBtn.addEventListener('click', (e) => {
      e.preventDefault();
      prevSlide();
    });
  }
  
  if (nextBtn) {
    nextBtn.addEventListener('click', (e) => {
      e.preventDefault();
      nextSlide();
    });
  }
  
  // Dot click events
  if (dots.length > 0) {
    dots.forEach(dot => {
      dot.addEventListener('click', (e) => {
        e.preventDefault();
        const index = parseInt(dot.getAttribute('data-index'), 10);
        if (!isNaN(index)) {
          goToSlide(index);
        }
      });
    });
  }
  
  // Touch/Swipe support
  let touchStartX = 0;
  let touchEndX = 0;
  const swipeThreshold = 50;
  
  function handleTouchStart(e) {
    touchStartX = e.changedTouches[0].screenX;
    stopAutoplay();
  }
  
  function handleTouchEnd(e) {
    touchEndX = e.changedTouches[0].screenX;
    const diff = touchStartX - touchEndX;
    
    if (Math.abs(diff) > swipeThreshold) {
      if (diff > 0) {
        nextSlide();
      } else {
        prevSlide();
      }
    }
  }
  
  if (track) {
    track.addEventListener('touchstart', handleTouchStart, { passive: true });
    track.addEventListener('touchend', handleTouchEnd, { passive: true });
  }
  
  // Keyboard navigation
  function handleKeydown(e) {
    if (e.key === 'ArrowLeft') prevSlide();
    if (e.key === 'ArrowRight') nextSlide();
  }
  
  section.addEventListener('keydown', handleKeydown);
  
  // Pause autoplay on hover
  section.addEventListener('mouseenter', stopAutoplay);
  section.addEventListener('mouseleave', startAutoplay);
  
  // Make section focusable for keyboard navigation
  section.setAttribute('tabindex', '0');
  
  // Initialize
  updateSlider();
  startAutoplay();
})();
</script>

{% schema %}
{
  "name": "Blog Slider v2",
  "tag": "section",
  "class": "section section-blog-slider",
  "settings": [
    {
      "type": "header",
      "content": "üì∞ Blog Source"
    },
    {
      "type": "blog",
      "id": "blog",
      "label": "Blog"
    },
    {
      "type": "range",
      "id": "articles_limit",
      "min": 1,
      "max": 12,
      "step": 1,
      "label": "Maximum articles",
      "default": 5
    },
    {
      "type": "header",
      "content": "üìù Section Header"
    },
    {
      "type": "text",
      "id": "section_eyebrow",
      "label": "Eyebrow text",
      "default": "FROM THE BLOG"
    },
    {
      "type": "text",
      "id": "section_title",
      "label": "Section title",
      "default": "Insights & Stories"
    },
    {
      "type": "range",
      "id": "section_title_size",
      "min": 24,
      "max": 56,
      "step": 2,
      "unit": "px",
      "label": "Section title size",
      "default": 36
    },
    {
      "type": "select",
      "id": "header_alignment",
      "label": "Header alignment",
      "options": [
        {
          "value": "left",
          "label": "Left"
        },
        {
          "value": "center",
          "label": "Center"
        },
        {
          "value": "right",
          "label": "Right"
        }
      ],
      "default": "left"
    },
    {
      "type": "header",
      "content": "üé® Layout"
    },
    {
      "type": "select",
      "id": "layout_direction",
      "label": "Layout direction",
      "options": [
        {
          "value": "content_first",
          "label": "Content left, Image right"
        },
        {
          "value": "image_first",
          "label": "Image left, Content right"
        }
      ],
      "default": "content_first"
    },
    {
      "type": "range",
      "id": "columns_gap",
      "min": 0,
      "max": 80,
      "step": 4,
      "unit": "px",
      "label": "Gap between columns",
      "default": 40
    },
    {
      "type": "select",
      "id": "content_aspect_ratio",
      "label": "Content box aspect ratio",
      "options": [
        {
          "value": "auto",
          "label": "Auto (flexible)"
        },
        {
          "value": "1 / 1",
          "label": "Square (1:1)"
        },
        {
          "value": "4 / 3",
          "label": "Landscape (4:3)"
        },
        {
          "value": "3 / 4",
          "label": "Portrait (3:4)"
        }
      ],
      "default": "1 / 1"
    },
    {
      "type": "select",
      "id": "image_aspect_ratio",
      "label": "Image aspect ratio",
      "options": [
        {
          "value": "auto",
          "label": "Auto (match content)"
        },
        {
          "value": "1 / 1",
          "label": "Square (1:1)"
        },
        {
          "value": "4 / 3",
          "label": "Landscape (4:3)"
        },
        {
          "value": "16 / 9",
          "label": "Wide (16:9)"
        },
        {
          "value": "3 / 4",
          "label": "Portrait (3:4)"
        }
      ],
      "default": "1 / 1"
    },
    {
      "type": "select",
      "id": "mobile_image_position",
      "label": "Mobile: Image position",
      "options": [
        {
          "value": "top",
          "label": "Image on top"
        },
        {
          "value": "bottom",
          "label": "Image on bottom"
        }
      ],
      "default": "top"
    },
    {
      "type": "select",
      "id": "mobile_image_aspect_ratio",
      "label": "Mobile: Image aspect ratio",
      "options": [
        {
          "value": "1 / 1",
          "label": "Square (1:1)"
        },
        {
          "value": "4 / 3",
          "label": "Landscape (4:3)"
        },
        {
          "value": "16 / 9",
          "label": "Wide (16:9)"
        },
        {
          "value": "3 / 2",
          "label": "Photo (3:2)"
        }
      ],
      "default": "4 / 3"
    },
    {
      "type": "header",
      "content": "‚úèÔ∏è Content Settings"
    },
    {
      "type": "checkbox",
      "id": "show_eyebrow",
      "label": "Show eyebrow/category",
      "default": true
    },
    {
      "type": "select",
      "id": "eyebrow_source",
      "label": "Eyebrow source",
      "options": [
        {
          "value": "blog_title",
          "label": "Blog title"
        },
        {
          "value": "first_tag",
          "label": "First tag"
        },
        {
          "value": "custom",
          "label": "Custom text"
        }
      ],
      "default": "blog_title"
    },
    {
      "type": "text",
      "id": "custom_eyebrow",
      "label": "Custom eyebrow text"
    },
    {
      "type": "select",
      "id": "eyebrow_style",
      "label": "Eyebrow style",
      "options": [
        {
          "value": "plain",
          "label": "Plain text"
        },
        {
          "value": "underline",
          "label": "With underline accent"
        }
      ],
      "default": "underline"
    },
    {
      "type": "range",
      "id": "eyebrow_size",
      "min": 10,
      "max": 16,
      "step": 1,
      "unit": "px",
      "label": "Eyebrow size",
      "default": 12
    },
    {
      "type": "checkbox",
      "id": "show_description",
      "label": "Show description",
      "default": true
    },
    {
      "type": "range",
      "id": "description_length",
      "min": 80,
      "max": 300,
      "step": 10,
      "label": "Description max characters",
      "default": 180
    },
    {
      "type": "checkbox",
      "id": "show_read_time",
      "label": "Show reading time",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_date_badge",
      "label": "Show date badge on image",
      "default": false
    },
    {
      "type": "text",
      "id": "date_format",
      "label": "Date format",
      "default": "%b %d, %Y",
      "info": "%b = month, %d = day, %Y = year"
    },
    {
      "type": "select",
      "id": "content_alignment",
      "label": "Content alignment",
      "options": [
        {
          "value": "flex-start",
          "label": "Left"
        },
        {
          "value": "center",
          "label": "Center"
        },
        {
          "value": "flex-end",
          "label": "Right"
        }
      ],
      "default": "flex-start"
    },
    {
      "type": "select",
      "id": "content_text_alignment",
      "label": "Text alignment",
      "options": [
        {
          "value": "left",
          "label": "Left"
        },
        {
          "value": "center",
          "label": "Center"
        },
        {
          "value": "right",
          "label": "Right"
        }
      ],
      "default": "left"
    },
    {
      "type": "header",
      "content": "üî§ Typography"
    },
    {
      "type": "range",
      "id": "title_size",
      "min": 20,
      "max": 56,
      "step": 2,
      "unit": "px",
      "label": "Title size",
      "default": 32
    },
    {
      "type": "select",
      "id": "title_weight",
      "label": "Title weight",
      "options": [
        {
          "value": "300",
          "label": "Light"
        },
        {
          "value": "400",
          "label": "Regular"
        },
        {
          "value": "500",
          "label": "Medium"
        },
        {
          "value": "600",
          "label": "Semi-bold"
        },
        {
          "value": "700",
          "label": "Bold"
        }
      ],
      "default": "400"
    },
    {
      "type": "range",
      "id": "description_size",
      "min": 14,
      "max": 20,
      "step": 1,
      "unit": "px",
      "label": "Description size",
      "default": 16
    },
    {
      "type": "header",
      "content": "üé® Colors"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Section background",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "content_background_color",
      "label": "Content box background",
      "default": "#f5f3ef"
    },
    {
      "type": "checkbox",
      "id": "show_content_border",
      "label": "Show content box border",
      "default": false
    },
    {
      "type": "color",
      "id": "border_color",
      "label": "Border color",
      "default": "#e5e1da"
    },
    {
      "type": "color",
      "id": "title_color",
      "label": "Title color",
      "default": "#2c2416"
    },
    {
      "type": "color",
      "id": "eyebrow_color",
      "label": "Eyebrow color",
      "default": "#8b7355"
    },
    {
      "type": "color",
      "id": "description_color",
      "label": "Description color",
      "default": "#5a4d3a"
    },
    {
      "type": "color",
      "id": "accent_color",
      "label": "Accent color",
      "default": "#c4a574"
    },
    {
      "type": "color",
      "id": "image_background_color",
      "label": "Image placeholder background",
      "default": "#f5f3ef"
    },
    {
      "type": "header",
      "content": "üîò Button"
    },
    {
      "type": "checkbox",
      "id": "show_button",
      "label": "Show button",
      "default": true
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "Button text",
      "default": "Read Article"
    },
    {
      "type": "select",
      "id": "button_style",
      "label": "Button style",
      "options": [
        {
          "value": "solid",
          "label": "Solid button"
        },
        {
          "value": "animated_arrow",
          "label": "Animated arrow"
        }
      ],
      "default": "animated_arrow"
    },
    {
      "type": "range",
      "id": "button_text_size",
      "min": 12,
      "max": 18,
      "step": 1,
      "unit": "px",
      "label": "Button text size",
      "default": 14
    },
    {
      "type": "range",
      "id": "button_padding_x",
      "min": 16,
      "max": 40,
      "step": 2,
      "unit": "px",
      "label": "Button horizontal padding",
      "default": 24
    },
    {
      "type": "range",
      "id": "button_padding_y",
      "min": 10,
      "max": 20,
      "step": 2,
      "unit": "px",
      "label": "Button vertical padding",
      "default": 14
    },
    {
      "type": "range",
      "id": "button_border_radius",
      "min": 0,
      "max": 40,
      "step": 2,
      "unit": "px",
      "label": "Button border radius",
      "default": 4
    },
    {
      "type": "color",
      "id": "button_background",
      "label": "Button background",
      "default": "#2c2416"
    },
    {
      "type": "color",
      "id": "button_text_color",
      "label": "Button text color",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "button_hover_background",
      "label": "Button hover background",
      "default": "#8b7355"
    },
    {
      "type": "header",
      "content": "üñºÔ∏è Image"
    },
    {
      "type": "range",
      "id": "image_border_radius",
      "min": 0,
      "max": 40,
      "step": 2,
      "unit": "px",
      "label": "Image border radius",
      "default": 8
    },
    {
      "type": "range",
      "id": "content_border_radius",
      "min": 0,
      "max": 40,
      "step": 2,
      "unit": "px",
      "label": "Content box border radius",
      "default": 8
    },
    {
      "type": "range",
      "id": "content_padding",
      "min": 24,
      "max": 80,
      "step": 4,
      "unit": "px",
      "label": "Content box padding",
      "default": 48
    },
    {
      "type": "header",
      "content": "‚óÄÔ∏è Navigation"
    },
    {
      "type": "checkbox",
      "id": "show_controls",
      "label": "Show navigation controls",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_arrows",
      "label": "Show arrows",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_dots",
      "label": "Show indicators",
      "default": true
    },
    {
      "type": "select",
      "id": "indicator_style",
      "label": "Indicator style",
      "options": [
        {
          "value": "dots",
          "label": "Dots"
        },
        {
          "value": "progress",
          "label": "Progress bars"
        }
      ],
      "default": "dots"
    },
    {
      "type": "checkbox",
      "id": "show_counter",
      "label": "Show slide counter",
      "default": false
    },
    {
      "type": "select",
      "id": "controls_alignment",
      "label": "Controls alignment",
      "options": [
        {
          "value": "flex-start",
          "label": "Left"
        },
        {
          "value": "center",
          "label": "Center"
        },
        {
          "value": "flex-end",
          "label": "Right"
        },
        {
          "value": "space-between",
          "label": "Space between"
        }
      ],
      "default": "center"
    },
    {
      "type": "range",
      "id": "controls_margin_top",
      "min": 16,
      "max": 60,
      "step": 4,
      "unit": "px",
      "label": "Controls top margin",
      "default": 32
    },
    {
      "type": "header",
      "content": "Arrow Style"
    },
    {
      "type": "range",
      "id": "arrow_size",
      "min": 36,
      "max": 60,
      "step": 2,
      "unit": "px",
      "label": "Arrow button size",
      "default": 48
    },
    {
      "type": "range",
      "id": "arrow_border_radius",
      "min": 0,
      "max": 30,
      "step": 2,
      "unit": "px",
      "label": "Arrow border radius",
      "default": 24
    },
    {
      "type": "color",
      "id": "arrow_background",
      "label": "Arrow background",
      "default": "transparent"
    },
    {
      "type": "color",
      "id": "arrow_border_color",
      "label": "Arrow border color",
      "default": "#e5e1da"
    },
    {
      "type": "color",
      "id": "arrow_color",
      "label": "Arrow icon color",
      "default": "#2c2416"
    },
    {
      "type": "color",
      "id": "arrow_hover_background",
      "label": "Arrow hover background",
      "default": "#2c2416"
    },
    {
      "type": "color",
      "id": "arrow_hover_color",
      "label": "Arrow hover icon color",
      "default": "#ffffff"
    },
    {
      "type": "header",
      "content": "Dot Style"
    },
    {
      "type": "range",
      "id": "dot_size",
      "min": 8,
      "max": 16,
      "step": 1,
      "unit": "px",
      "label": "Dot size",
      "default": 10
    },
    {
      "type": "range",
      "id": "dot_gap",
      "min": 6,
      "max": 16,
      "step": 2,
      "unit": "px",
      "label": "Gap between dots",
      "default": 10
    },
    {
      "type": "range",
      "id": "dot_border_radius",
      "min": 0,
      "max": 10,
      "step": 1,
      "unit": "px",
      "label": "Dot border radius",
      "default": 5
    },
    {
      "type": "color",
      "id": "dot_color",
      "label": "Dot color",
      "default": "#d4cfc6"
    },
    {
      "type": "color",
      "id": "dot_active_color",
      "label": "Active dot color",
      "default": "#2c2416"
    },
    {
      "type": "checkbox",
      "id": "dot_active_scale",
      "label": "Scale active dot",
      "default": false
    },
    {
      "type": "header",
      "content": "‚öôÔ∏è Behavior"
    },
    {
      "type": "checkbox",
      "id": "disable_loop",
      "label": "Disable infinite loop",
      "default": false
    },
    {
      "type": "checkbox",
      "id": "autoplay",
      "label": "Enable autoplay",
      "default": false
    },
    {
      "type": "range",
      "id": "autoplay_delay",
      "min": 0,
      "max": 2000,
      "step": 50,
      "unit": "ms",
      "label": "Autoplay delay",
      "default": 350
    },
    {
      "type": "header",
      "content": "üìê Spacing"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 120,
      "step": 4,
      "unit": "px",
      "label": "Top padding",
      "default": 60
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 120,
      "step": 4,
      "unit": "px",
      "label": "Bottom padding",
      "default": 60
    },
    {
      "type": "range",
      "id": "horizontal_padding",
      "min": 16,
      "max": 60,
      "step": 4,
      "unit": "px",
      "label": "Horizontal padding",
      "default": 24
    },
    {
      "type": "header",
      "content": "üìù Empty State"
    },
    {
      "type": "text",
      "id": "empty_message",
      "label": "Empty state message",
      "default": "Select a blog to display articles"
    }
  ],
  "presets": [
    {
      "name": "Blog Slider v2",
      "category": "Blog",
      "settings": {
        "blog": "",
        "articles_limit": 5,
        "section_eyebrow": "FROM THE BLOG",
        "section_title": "Insights & Stories"
      }
    }
  ]
}
{% endschema %}