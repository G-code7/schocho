{%- style -%}
  .blog-slider-{{ block.id }} {
    --color-background: {{ block.settings.background_color }};
    --color-background-1: {{ block.settings.content_background_color }};
    --color-foreground: {{ block.settings.text_color }};
    --color-accent: {{ block.settings.accent_color }};
    --color-border: {{ block.settings.border_color }};
    --color-eyebrow: {{ block.settings.eyebrow_color }};
    
    background-color: var(--color-background);
    padding: {{ block.settings.padding_top }}px 0 {{ block.settings.padding_bottom }}px;
  }

  .blog-slider__container-{{ block.id }} {
    max-width: var(--page-width, 1200px);
    margin: 0 auto;
    padding: 0 {{ block.settings.horizontal_padding }}px;
  }

  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     HEADER DE SECCIÃ“N
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
  .blog-slider__header-{{ block.id }} {
    text-align: {{ block.settings.header_alignment }};
    margin-bottom: {{ block.settings.header_spacing }}px;
  }

  .blog-slider__eyebrow-{{ block.id }} {
    font-size: 11px;
    letter-spacing: 0.15em;
    text-transform: uppercase;
    color: var(--color-eyebrow);
    margin-bottom: 12px;
    display: block;
    font-weight: 500;
  }

  .blog-slider__section-title-{{ block.id }} {
    font-size: {{ block.settings.title_size }}px;
    color: var(--color-foreground);
    margin: 0;
    line-height: 1.1;
    font-weight: 400;
  }

  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     SLIDER STRUCTURE - CRÃTICO
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
  
  /* Viewport: contiene todo y oculta el overflow */
  .blog-slider__viewport-{{ block.id }} {
    position: relative;
    overflow: hidden;
    width: 100%;
  }

  /* Track: contenedor flex que se desplaza */
  .blog-slider__track-{{ block.id }} {
    display: flex;
    width: 100%;
    transition: transform 0.6s cubic-bezier(0.83, 0, 0.17, 1);
    will-change: transform;
  }

  /* Cada slide ocupa 100% del ancho */
  .blog-slider__slide-{{ block.id }} {
    flex: 0 0 100%;
    min-width: 0;
    width: 100%;
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: {{ block.settings.gap_between }}px;
    align-items: stretch;
  }

  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     COLUMNA IZQUIERDA - CONTENIDO
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
  .blog-slider__content-{{ block.id }} {
    background-color: var(--color-background-1);
    display: flex;
    flex-direction: column;
    justify-content: center;
    border-radius: 16px;
    padding: {{ block.settings.content_padding }}px;
    position: relative;
    aspect-ratio: {{ block.settings.content_aspect_ratio }};
    min-height: 0;
  }

  .blog-slider__content-inner-{{ block.id }} {
    display: flex;
    flex-direction: column;
    gap: {{ block.settings.content_spacing }}px;
    align-items: {{ block.settings.content_alignment }};
    text-align: {{ block.settings.text_alignment }};
  }

  .blog-slider__article-eyebrow-{{ block.id }} {
    font-size: 11px;
    letter-spacing: 0.15em;
    text-transform: uppercase;
    color: var(--color-eyebrow);
    font-weight: 500;
  }

  .blog-slider__article-title-{{ block.id }} {
    font-size: {{ block.settings.article_title_size }}px;
    color: var(--color-foreground);
    margin: 0;
    line-height: 1.2;
    font-weight: 400;
  }

  .blog-slider__article-title-{{ block.id }} a {
    color: inherit;
    text-decoration: none;
    transition: opacity 0.3s ease;
  }

  .blog-slider__article-title-{{ block.id }} a:hover {
    opacity: 0.7;
  }

  .blog-slider__description-{{ block.id }} {
    font-size: {{ block.settings.description_size }}px;
    color: var(--color-foreground);
    line-height: 1.7;
    opacity: 0.8;
    margin: 0;
  }

  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     BOTÃ“N CON FLECHA ANIMADA
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
  .blog-slider__button-wrapper-{{ block.id }} {
    display: flex;
    align-items: center;
    gap: 16px;
    margin-top: 8px;
  }

  .icon-arrow-animated-{{ block.id }} {
    position: relative;
    width: 64px;
    height: 32px;
    overflow: hidden;
    flex-shrink: 0;
    cursor: pointer;
    text-decoration: none;
    display: block;
  }

  .icon-arrow-animated-svg-{{ block.id }} {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
  }

  .icon-arrow-animated-bg-{{ block.id }} {
    fill: none;
    stroke: var(--color-border);
    stroke-width: 1;
  }

  .icon-arrow-animated-fill-{{ block.id }} {
    fill: none;
    stroke: var(--color-accent);
    stroke-width: 1.5;
    stroke-dasharray: 118;
    stroke-dashoffset: 118;
    transition: stroke-dashoffset 0.6s cubic-bezier(0.83, 0, 0.17, 1);
  }

  .icon-arrow-animated-{{ block.id }}:hover .icon-arrow-animated-fill-{{ block.id }} {
    stroke-dashoffset: 0;
  }

  .icon-arrow-animated-item-{{ block.id }} {
    position: absolute;
    top: 50%;
    left: 50%;
    transition: transform 0.4s cubic-bezier(0.83, 0, 0.17, 1), opacity 0.4s ease;
    color: var(--color-foreground);
  }

  .icon-arrow-animated-item--1-{{ block.id }} {
    transform: translate(-50%, -50%);
    opacity: 1;
  }

  .icon-arrow-animated-item--2-{{ block.id }} {
    transform: translate(-150%, -50%);
    opacity: 0;
  }

  .icon-arrow-animated-{{ block.id }}:hover .icon-arrow-animated-item--1-{{ block.id }} {
    transform: translate(50%, -50%);
    opacity: 0;
  }

  .icon-arrow-animated-{{ block.id }}:hover .icon-arrow-animated-item--2-{{ block.id }} {
    transform: translate(-50%, -50%);
    opacity: 1;
  }

  .blog-slider__read-time-{{ block.id }} {
    font-size: 13px;
    color: var(--color-foreground);
    opacity: 0.7;
  }

  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     COLUMNA DERECHA - IMAGEN
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
  .blog-slider__media-{{ block.id }} {
    position: relative;
    overflow: hidden;
    background-color: {{ block.settings.image_background }};
    aspect-ratio: {{ block.settings.content_aspect_ratio }};
    border-radius: 16px;
    min-height: 0;
  }

  .blog-slider__media-link-{{ block.id }} {
    display: block;
    width: 100%;
    height: 100%;
  }

  .blog-slider__image-{{ block.id }} {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.6s cubic-bezier(0.83, 0, 0.17, 1);
  }

  .blog-slider__slide-{{ block.id }}:hover .blog-slider__image-{{ block.id }} {
    transform: scale(1.03);
  }

  .blog-slider__image-placeholder-{{ block.id }} {
    width: 100%;
    height: 100%;
    background-color: var(--color-background-1);
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .blog-slider__image-placeholder-{{ block.id }} svg {
    width: 40%;
    height: 40%;
    max-width: 150px;
    opacity: 0.3;
  }

  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     CONTROLES DEL SLIDER
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
  .blog-slider__controls-{{ block.id }} {
    display: flex;
    justify-content: {{ block.settings.controls_alignment }};
    align-items: center;
    gap: 20px;
    margin-top: {{ block.settings.controls_spacing }}px;
  }

  .blog-slider__nav-{{ block.id }} {
    display: flex;
    gap: 12px;
  }

  .blog-slider__arrow-{{ block.id }} {
    background-color: transparent;
    color: var(--color-foreground);
    border: 1px solid var(--color-border);
    width: 48px;
    height: 48px;
    border-radius: 50%;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s cubic-bezier(0.83, 0, 0.17, 1);
    padding: 0;
  }

  .blog-slider__arrow-{{ block.id }}:hover:not(:disabled) {
    background-color: var(--color-foreground);
    color: var(--color-background-1);
    border-color: var(--color-foreground);
  }

  .blog-slider__arrow-{{ block.id }}:disabled {
    opacity: 0.3;
    cursor: not-allowed;
  }

  .blog-slider__arrow-{{ block.id }} svg {
    width: 20px;
    height: 20px;
  }

  .blog-slider__dots-{{ block.id }} {
    display: flex;
    gap: 8px;
    align-items: center;
  }

  .blog-slider__dot-{{ block.id }} {
    width: 6px;
    height: 6px;
    border-radius: 50%;
    background-color: var(--color-foreground);
    border: none;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.83, 0, 0.17, 1);
    opacity: 0.3;
    padding: 0;
  }

  .blog-slider__dot-{{ block.id }}.active {
    opacity: 1;
    transform: scale(1.4);
  }

  .blog-slider__dot-{{ block.id }}:hover:not(.active) {
    opacity: 0.6;
  }

  /* Contador */
  .blog-slider__counter-{{ block.id }} {
    font-size: 13px;
    color: var(--color-foreground);
    font-weight: 500;
    letter-spacing: 0.05em;
  }

  .blog-slider__counter-total-{{ block.id }} {
    opacity: 0.5;
  }

  /* Estado vacÃ­o */
  .blog-slider__empty-{{ block.id }} {
    text-align: center;
    padding: 80px 40px;
    color: var(--color-foreground);
    font-size: 16px;
    background-color: var(--color-background-1);
    opacity: 0.7;
  }

  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     RESPONSIVE
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
  @media screen and (max-width: 990px) {
    .blog-slider__slide-{{ block.id }} {
      grid-template-columns: 1fr;
      gap: 0;
    }

    .blog-slider__content-{{ block.id }} {
      order: 2;
      aspect-ratio: auto;
      padding: {{ block.settings.content_padding | times: 0.75 | round }}px;
    }

    .blog-slider__media-{{ block.id }} {
      order: 1;
      aspect-ratio: 4 / 3;
    }

    .blog-slider__article-title-{{ block.id }} {
      font-size: {{ block.settings.article_title_size | times: 0.85 | round }}px;
    }
  }

  @media screen and (max-width: 749px) {
    .blog-slider-{{ block.id }} {
      padding: {{ block.settings.padding_top | times: 0.6 | round }}px 0 {{ block.settings.padding_bottom | times: 0.6 | round }}px;
    }

    .blog-slider__container-{{ block.id }} {
      padding: 0 20px;
    }

    .blog-slider__header-{{ block.id }} {
      margin-bottom: {{ block.settings.header_spacing | times: 0.7 | round }}px;
    }

    .blog-slider__section-title-{{ block.id }} {
      font-size: {{ block.settings.title_size | times: 0.75 | round }}px;
    }

    .blog-slider__content-{{ block.id }} {
      padding: 28px;
    }

    .blog-slider__article-title-{{ block.id }} {
      font-size: {{ block.settings.article_title_size | times: 0.7 | round }}px;
    }

    .blog-slider__description-{{ block.id }} {
      font-size: {{ block.settings.description_size | times: 0.9 | round }}px;
    }

    .blog-slider__controls-{{ block.id }} {
      justify-content: center;
    }

    .blog-slider__arrow-{{ block.id }} {
      width: 42px;
      height: 42px;
    }
  }

  /* Reduced motion */
  @media (prefers-reduced-motion: reduce) {
    .blog-slider__track-{{ block.id }},
    .blog-slider__image-{{ block.id }},
    .icon-arrow-animated-fill-{{ block.id }},
    .icon-arrow-animated-item-{{ block.id }} {
      transition: none;
    }

    .blog-slider__slide-{{ block.id }}:hover .blog-slider__image-{{ block.id }} {
      transform: none;
    }
  }
{%- endstyle -%}

<div class="blog-slider-{{ block.id }}" data-blog-slider="{{ block.id }}" {{ block.shopify_attributes }}>
  <div class="blog-slider__container-{{ block.id }}">
    
    {%- if block.settings.section_eyebrow != blank or block.settings.section_title != blank -%}
      <div class="blog-slider__header-{{ block.id }}">
        {%- if block.settings.section_eyebrow != blank -%}
          <span class="blog-slider__eyebrow-{{ block.id }}">{{ block.settings.section_eyebrow | escape }}</span>
        {%- endif -%}
        {%- if block.settings.section_title != blank -%}
          <h2 class="blog-slider__section-title-{{ block.id }}">{{ block.settings.section_title | escape }}</h2>
        {%- endif -%}
      </div>
    {%- endif -%}

    {%- assign blog = block.settings.blog -%}
    {%- if blog != blank and blog.articles_count > 0 -%}
      {%- assign articles_limit = block.settings.articles_limit | at_most: blog.articles_count -%}
      
      {%- comment -%} â•â•â•â•â•â• SLIDER VIEWPORT â•â•â•â•â•â• {%- endcomment -%}
      <div class="blog-slider__viewport-{{ block.id }}">
        <div class="blog-slider__track-{{ block.id }}" data-slider-track>
          
          {%- for article in blog.articles limit: articles_limit -%}
            <div class="blog-slider__slide-{{ block.id }}" data-slide="{{ forloop.index0 }}">
              
              {%- comment -%} COLUMNA IZQUIERDA: CONTENIDO {%- endcomment -%}
              <div class="blog-slider__content-{{ block.id }}">
                <div class="blog-slider__content-inner-{{ block.id }}">
                  
                  {%- if block.settings.show_eyebrow -%}
                    {%- if article.tags.size > 0 -%}
                      <div class="blog-slider__article-eyebrow-{{ block.id }}">{{ article.tags.first }}</div>
                    {%- elsif block.settings.custom_eyebrow != blank -%}
                      <div class="blog-slider__article-eyebrow-{{ block.id }}">{{ block.settings.custom_eyebrow }}</div>
                    {%- endif -%}
                  {%- endif -%}

                  <h3 class="blog-slider__article-title-{{ block.id }}">
                    <a href="{{ article.url }}">{{ article.title | escape }}</a>
                  </h3>

                  {%- if block.settings.show_description -%}
                    <p class="blog-slider__description-{{ block.id }}">
                      {%- if article.excerpt != blank -%}
                        {{ article.excerpt | strip_html | truncate: block.settings.description_length }}
                      {%- else -%}
                        {{ article.content | strip_html | truncate: block.settings.description_length }}
                      {%- endif -%}
                    </p>
                  {%- endif -%}

                  {%- if block.settings.show_button -%}
                    <div class="blog-slider__button-wrapper-{{ block.id }}">
                      <a href="{{ article.url }}" class="icon-arrow-animated-{{ block.id }}" aria-label="{{ block.settings.button_text | default: 'Read article' }}">
                        <svg class="icon-arrow-animated-svg-{{ block.id }}" width="64" height="32" viewBox="0 0 64 32" fill="none">
                          <path class="icon-arrow-animated-bg-{{ block.id }}" d="M16 1h32a15 15 0 0 1 0 30H16a15 15 0 0 1 0-30z"/>
                          <path class="icon-arrow-animated-fill-{{ block.id }}" d="M16 1h32a15 15 0 0 1 0 30H16a15 15 0 0 1 0-30z"/>
                        </svg>
                        <svg class="icon-arrow-animated-item-{{ block.id }} icon-arrow-animated-item--1-{{ block.id }}" width="12" height="10" viewBox="0 0 12 10" fill="none">
                          <path d="M1 5L11 5M11 5L6.71429 1M11 5L6.71429 9" stroke="currentColor" stroke-width="1.2" stroke-linecap="square"/>
                        </svg>
                        <svg class="icon-arrow-animated-item-{{ block.id }} icon-arrow-animated-item--2-{{ block.id }}" width="12" height="10" viewBox="0 0 12 10" fill="none">
                          <path d="M1 5L11 5M11 5L6.71429 1M11 5L6.71429 9" stroke="currentColor" stroke-width="1.2" stroke-linecap="square"/>
                        </svg>
                      </a>
                      
                      {%- if block.settings.show_read_time -%}
                        {%- assign words = article.content | strip_html | split: ' ' | size -%}
                        {%- assign read_time = words | divided_by: 200 | at_least: 1 -%}
                        <span class="blog-slider__read-time-{{ block.id }}">{{ read_time }} min read</span>
                      {%- endif -%}
                    </div>
                  {%- endif -%}

                </div>
              </div>

              {%- comment -%} COLUMNA DERECHA: IMAGEN {%- endcomment -%}
              <div class="blog-slider__media-{{ block.id }}">
                <a href="{{ article.url }}" class="blog-slider__media-link-{{ block.id }}" aria-label="{{ article.title | escape }}">
                  {%- if article.image -%}
                    <img
                      src="{{ article.image | image_url: width: 1200 }}"
                      srcset="{{ article.image | image_url: width: 400 }} 400w,
                              {{ article.image | image_url: width: 600 }} 600w,
                              {{ article.image | image_url: width: 800 }} 800w,
                              {{ article.image | image_url: width: 1000 }} 1000w,
                              {{ article.image | image_url: width: 1200 }} 1200w"
                      sizes="(max-width: 990px) 100vw, 50vw"
                      alt="{{ article.image.alt | escape | default: article.title | escape }}"
                      class="blog-slider__image-{{ block.id }}"
                      loading="lazy"
                      width="{{ article.image.width }}"
                      height="{{ article.image.height }}"
                    >
                  {%- else -%}
                    <div class="blog-slider__image-placeholder-{{ block.id }}">
                      {{ 'image' | placeholder_svg_tag }}
                    </div>
                  {%- endif -%}
                </a>
              </div>

            </div>
          {%- endfor -%}
          
        </div>
      </div>

      {%- comment -%} â•â•â•â•â•â• CONTROLES â•â•â•â•â•â• {%- endcomment -%}
      {%- if articles_limit > 1 and block.settings.show_controls -%}
        <div class="blog-slider__controls-{{ block.id }}">
          
          {%- if block.settings.show_arrows -%}
            <div class="blog-slider__nav-{{ block.id }}">
              <button class="blog-slider__arrow-{{ block.id }}" data-slider-prev aria-label="Previous article">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <polyline points="15 18 9 12 15 6"/>
                </svg>
              </button>
              <button class="blog-slider__arrow-{{ block.id }}" data-slider-next aria-label="Next article">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <polyline points="9 18 15 12 9 6"/>
                </svg>
              </button>
            </div>
          {%- endif -%}

          {%- if block.settings.show_counter -%}
            <div class="blog-slider__counter-{{ block.id }}">
              <span data-slider-current>01</span>
              <span class="blog-slider__counter-total-{{ block.id }}"> / {{ articles_limit | prepend: '00' | slice: -2, 2 }}</span>
            </div>
          {%- endif -%}

          {%- if block.settings.show_dots -%}
            <div class="blog-slider__dots-{{ block.id }}">
              {%- for i in (1..articles_limit) -%}
                <button 
                  class="blog-slider__dot-{{ block.id }}{% if forloop.first %} active{% endif %}" 
                  data-slider-dot="{{ forloop.index0 }}"
                  aria-label="Go to article {{ forloop.index }}"
                ></button>
              {%- endfor -%}
            </div>
          {%- endif -%}

        </div>
      {%- endif -%}

    {%- else -%}
      <div class="blog-slider__empty-{{ block.id }}">
        <p>{{ block.settings.empty_message | escape }}</p>
        {%- if blog == blank -%}
          <p style="margin-top: 10px; font-size: 14px;">Please select a blog in the block settings</p>
        {%- endif -%}
      </div>
    {%- endif -%}

  </div>
</div>

<script>
(function() {
  const BLOCK_ID = '{{ block.id }}';
  const container = document.querySelector(`[data-blog-slider="${BLOCK_ID}"]`);
  if (!container) return;

  const track = container.querySelector('[data-slider-track]');
  if (!track) return;

  const slides = container.querySelectorAll('[data-slide]');
  const totalSlides = slides.length;
  
  // Exit if only one slide
  if (totalSlides <= 1) return;

  const prevBtn = container.querySelector('[data-slider-prev]');
  const nextBtn = container.querySelector('[data-slider-next]');
  const dots = container.querySelectorAll('[data-slider-dot]');
  const counterCurrent = container.querySelector('[data-slider-current]');

  let currentSlide = 0;
  const enableLoop = {{ block.settings.enable_loop | default: true }};
  const autoplay = {{ block.settings.autoplay | default: false }};
  const autoplayDelay = {{ block.settings.autoplay_delay | default: 5000 }};
  let autoplayInterval = null;

  function updateSlider() {
    // Move track
    track.style.transform = `translateX(-${currentSlide * 100}%)`;

    // Update dots
    dots.forEach((dot, i) => {
      dot.classList.toggle('active', i === currentSlide);
    });

    // Update counter
    if (counterCurrent) {
      counterCurrent.textContent = String(currentSlide + 1).padStart(2, '0');
    }

    // Update arrow states when loop is disabled
    if (!enableLoop) {
      if (prevBtn) prevBtn.disabled = currentSlide === 0;
      if (nextBtn) nextBtn.disabled = currentSlide === totalSlides - 1;
    }
  }

  function goToSlide(index) {
    if (enableLoop) {
      currentSlide = (index % totalSlides + totalSlides) % totalSlides;
    } else {
      currentSlide = Math.max(0, Math.min(index, totalSlides - 1));
    }
    updateSlider();
  }

  function nextSlide() {
    goToSlide(currentSlide + 1);
  }

  function prevSlide() {
    goToSlide(currentSlide - 1);
  }

  function startAutoplay() {
    if (!autoplay || autoplayDelay < 2000) return;
    stopAutoplay();
    autoplayInterval = setInterval(nextSlide, autoplayDelay);
  }

  function stopAutoplay() {
    if (autoplayInterval) {
      clearInterval(autoplayInterval);
      autoplayInterval = null;
    }
  }

  // Arrow buttons
  if (prevBtn) {
    prevBtn.addEventListener('click', function() {
      stopAutoplay();
      prevSlide();
    });
  }

  if (nextBtn) {
    nextBtn.addEventListener('click', function() {
      stopAutoplay();
      nextSlide();
    });
  }

  // Dot buttons
  dots.forEach(function(dot) {
    dot.addEventListener('click', function() {
      stopAutoplay();
      const index = parseInt(this.dataset.sliderDot, 10);
      goToSlide(index);
    });
  });

  // Touch/Swipe support
  let touchStartX = 0;
  let touchEndX = 0;

  track.addEventListener('touchstart', function(e) {
    touchStartX = e.changedTouches[0].screenX;
    stopAutoplay();
  }, { passive: true });

  track.addEventListener('touchend', function(e) {
    touchEndX = e.changedTouches[0].screenX;
    const diff = touchStartX - touchEndX;
    if (Math.abs(diff) > 50) {
      if (diff > 0) nextSlide();
      else prevSlide();
    }
  }, { passive: true });

  // Keyboard navigation
  container.addEventListener('keydown', function(e) {
    if (e.key === 'ArrowLeft') {
      stopAutoplay();
      prevSlide();
    } else if (e.key === 'ArrowRight') {
      stopAutoplay();
      nextSlide();
    }
  });

  // Make focusable for keyboard
  container.setAttribute('tabindex', '0');

  // Pause autoplay on hover
  container.addEventListener('mouseenter', stopAutoplay);
  container.addEventListener('mouseleave', startAutoplay);

  // Initialize
  updateSlider();
  startAutoplay();
})();
</script>

{% schema %}
{
  "name": "Blog Slider",
  "settings": [
    {
      "type": "header",
      "content": "ğŸ“° Blog"
    },
    {
      "type": "blog",
      "id": "blog",
      "label": "Blog"
    },
    {
      "type": "range",
      "id": "articles_limit",
      "min": 1,
      "max": 12,
      "step": 1,
      "label": "Maximum articles",
      "default": 5
    },
    {
      "type": "header",
      "content": "ğŸ“ Section Header"
    },
    {
      "type": "text",
      "id": "section_eyebrow",
      "label": "Section eyebrow",
      "default": "FROM THE BLOG"
    },
    {
      "type": "text",
      "id": "section_title",
      "label": "Section title",
      "default": "Insights & Stories"
    },
    {
      "type": "range",
      "id": "title_size",
      "min": 24,
      "max": 56,
      "step": 2,
      "unit": "px",
      "label": "Section title size",
      "default": 36
    },
    {
      "type": "select",
      "id": "header_alignment",
      "label": "Header alignment",
      "options": [
        { "value": "left", "label": "Left" },
        { "value": "center", "label": "Center" },
        { "value": "right", "label": "Right" }
      ],
      "default": "left"
    },
    {
      "type": "range",
      "id": "header_spacing",
      "min": 20,
      "max": 80,
      "step": 4,
      "unit": "px",
      "label": "Header bottom spacing",
      "default": 40
    },
    {
      "type": "header",
      "content": "ğŸ¨ Layout"
    },
    {
      "type": "select",
      "id": "content_aspect_ratio",
      "label": "Columns aspect ratio",
      "options": [
        { "value": "1 / 1", "label": "Square (1:1)" },
        { "value": "4 / 3", "label": "Landscape (4:3)" },
        { "value": "3 / 4", "label": "Portrait (3:4)" },
        { "value": "16 / 9", "label": "Wide (16:9)" }
      ],
      "default": "1 / 1",
      "info": "Both columns will have the same height"
    },
    {
      "type": "range",
      "id": "gap_between",
      "min": 0,
      "max": 60,
      "step": 4,
      "unit": "px",
      "label": "Gap between columns",
      "default": 0
    },
    {
      "type": "range",
      "id": "content_padding",
      "min": 24,
      "max": 80,
      "step": 4,
      "unit": "px",
      "label": "Content padding",
      "default": 48
    },
    {
      "type": "range",
      "id": "content_spacing",
      "min": 12,
      "max": 40,
      "step": 4,
      "unit": "px",
      "label": "Content inner spacing",
      "default": 20
    },
    {
      "type": "select",
      "id": "content_alignment",
      "label": "Content alignment",
      "options": [
        { "value": "flex-start", "label": "Left" },
        { "value": "center", "label": "Center" },
        { "value": "flex-end", "label": "Right" }
      ],
      "default": "flex-start"
    },
    {
      "type": "select",
      "id": "text_alignment",
      "label": "Text alignment",
      "options": [
        { "value": "left", "label": "Left" },
        { "value": "center", "label": "Center" },
        { "value": "right", "label": "Right" }
      ],
      "default": "left"
    },
    {
      "type": "header",
      "content": "âœï¸ Article Content"
    },
    {
      "type": "checkbox",
      "id": "show_eyebrow",
      "label": "Show eyebrow (tag)",
      "default": true
    },
    {
      "type": "text",
      "id": "custom_eyebrow",
      "label": "Custom eyebrow",
      "info": "Used if article has no tags"
    },
    {
      "type": "range",
      "id": "article_title_size",
      "min": 20,
      "max": 48,
      "step": 2,
      "unit": "px",
      "label": "Article title size",
      "default": 28
    },
    {
      "type": "checkbox",
      "id": "show_description",
      "label": "Show description",
      "default": true
    },
    {
      "type": "range",
      "id": "description_length",
      "min": 80,
      "max": 400,
      "step": 10,
      "label": "Description max characters",
      "default": 180,
      "info": "Adjust to balance content height"
    },
    {
      "type": "range",
      "id": "description_size",
      "min": 14,
      "max": 20,
      "step": 1,
      "unit": "px",
      "label": "Description size",
      "default": 16
    },
    {
      "type": "header",
      "content": "ğŸ”˜ Button"
    },
    {
      "type": "checkbox",
      "id": "show_button",
      "label": "Show button",
      "default": true
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "Button aria label",
      "default": "Read article"
    },
    {
      "type": "checkbox",
      "id": "show_read_time",
      "label": "Show read time",
      "default": true
    },
    {
      "type": "header",
      "content": "ğŸ¨ Colors"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Section background",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "content_background_color",
      "label": "Content background",
      "default": "#f5f3ef"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text color",
      "default": "#2c2416"
    },
    {
      "type": "color",
      "id": "eyebrow_color",
      "label": "Eyebrow color",
      "default": "#8b7355"
    },
    {
      "type": "color",
      "id": "accent_color",
      "label": "Accent color",
      "default": "#c4a574"
    },
    {
      "type": "color",
      "id": "border_color",
      "label": "Border color",
      "default": "#e5e1da"
    },
    {
      "type": "color",
      "id": "image_background",
      "label": "Image placeholder background",
      "default": "#fff0bb"
    },
    {
      "type": "header",
      "content": "â—€ï¸ Navigation"
    },
    {
      "type": "checkbox",
      "id": "show_controls",
      "label": "Show controls",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_arrows",
      "label": "Show arrows",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_dots",
      "label": "Show dots",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_counter",
      "label": "Show counter",
      "default": false
    },
    {
      "type": "select",
      "id": "controls_alignment",
      "label": "Controls alignment",
      "options": [
        { "value": "flex-start", "label": "Left" },
        { "value": "center", "label": "Center" },
        { "value": "flex-end", "label": "Right" },
        { "value": "space-between", "label": "Space between" }
      ],
      "default": "center"
    },
    {
      "type": "range",
      "id": "controls_spacing",
      "min": 20,
      "max": 60,
      "step": 4,
      "unit": "px",
      "label": "Controls top spacing",
      "default": 32
    },
    {
      "type": "header",
      "content": "âš™ï¸ Behavior"
    },
    {
      "type": "checkbox",
      "id": "enable_loop",
      "label": "Enable infinite loop",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "autoplay",
      "label": "Autoplay",
      "default": false
    },
    {
      "type": "range",
      "id": "autoplay_delay",
      "min": 0,
      "max": 2000,
      "step": 50,
      "unit": "ms",
      "label": "Autoplay delay",
      "default": 350
    },
    {
      "type": "header",
      "content": "ğŸ“ Spacing"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Top padding",
      "default": 60
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Bottom padding",
      "default": 60
    },
    {
      "type": "range",
      "id": "horizontal_padding",
      "min": 16,
      "max": 60,
      "step": 4,
      "unit": "px",
      "label": "Horizontal padding",
      "default": 24
    },
    {
      "type": "header",
      "content": "ğŸ“ Empty State"
    },
    {
      "type": "text",
      "id": "empty_message",
      "label": "Empty message",
      "default": "No articles found"
    }
  ],
  "presets": [
    {
      "name": "Blog Slider",
      "category": "Blog"
    }
  ]
}
{% endschema %}
